/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// Copyright (c) 2010 "Cowboy" Ben Alman,
function createMethod(t){return function(){throw new Error('The "'+t+"\" method is not available on the playback technology's API")}}!function(t,e,i){"$:nomunge";function s(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}var n,o="hashchange",r=document,a=t.event.special,l=r.documentMode,h="on"+o in e&&(l===i||l>7);t.fn[o]=function(t){return t?this.bind(o,t):this.trigger(o)},t.fn[o].delay=50,a[o]=t.extend(a[o],{setup:function(){if(h)return!1;t(n.start)},teardown:function(){if(h)return!1;t(n.stop)}}),n=function(){function n(){var i=s(),r=v(p);i!==p?(f(p=i,r),t(e).trigger(o)):r!==p&&(location.href=location.href.replace(/#.*/,"")+r),a=setTimeout(n,t.fn[o].delay)}var a,l,c,u={},p=s(),d=function(t){return t},f=d,v=d;return u.start=function(){a||n()},u.stop=function(){a&&clearTimeout(a),a=i},t.browser.msie&&!h&&(u.start=function(){l||(c=(c=t.fn[o].src)&&c+s(),l=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||f(s()),n()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,r.onpropertychange=function(){try{"title"===event.propertyName&&(l.document.title=r.title)}catch(t){}})},u.stop=d,v=function(){return s(l.location.href)},f=function(e,i){var s=l.document,n=t.fn[o].domain;e!==i&&(s.title=r.title,s.open(),n&&s.write('<script>document.domain="'+n+'"</script>'),s.close(),l.location.hash=e)}),u}()}(jQuery,this),
// copyright chris wanstrath
function(t){function e(e,s,n){var o=this;return this.on("click.pjax",e,function(e){var r=t.extend({},p(s,n));r.container||(r.container=t(this).attr("data-pjax")||o),i(e,r)})}function i(e,i,s){s=p(i,s);var o=e.currentTarget;if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==o.protocol||location.hostname!==o.hostname||o.hash&&o.href.replace(o.hash,"")===location.href.replace(location.hash,"")||o.href===location.href+"#"||e.isDefaultPrevented())){var r={url:o.href,container:t(o).attr("data-pjax"),target:o},a=t.extend({},r,s),l=t.Event("pjax:click");t(o).trigger(l,[a]),l.isDefaultPrevented()||(n(a),e.preventDefault(),t(o).trigger("pjax:clicked",[a]))}}function s(e,i,s){s=p(i,s);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var r={type:o.method.toUpperCase(),url:o.action,data:t(o).serializeArray(),container:t(o).attr("data-pjax"),target:o};n(t.extend({},r,s)),e.preventDefault()}function n(e){function i(e,i,s){s||(s={}),s.relatedTarget=a;var n=t.Event(e,s);return p.trigger(n,i),!n.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,n.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var s,o,a=e.target,l=u(e.url).hash,p=e.context=d(e.container);return e.data||(e.data={}),e.data._pjax=p.selector,e.beforeSend=function(t,n){if("GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",p.selector),!i("pjax:beforeSend",[t,n]))return!1;n.timeout>0&&(s=setTimeout(function(){i("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),e.requestUrl=u(n.url).href},e.complete=function(t,n){s&&clearTimeout(s),i("pjax:complete",[t,n,e]),i("pjax:end",[t,e])},e.error=function(t,s,n){var o=m("",t,e),a=i("pjax:error",[t,s,n,e]);"GET"==e.type&&"abort"!==s&&a&&r(o.url)},e.success=function(s,o,a){var c=n.state,d="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,f=a.getResponseHeader("X-PJAX-Version"),v=m(s,a,e);if(d&&f&&d!==f)r(v.url);else if(v.contents){n.state={id:e.id||h(),url:v.url,title:v.title,container:p.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(n.state,v.title,v.url);try{document.activeElement.blur()}catch(b){}v.title&&(document.title=v.title),i("pjax:beforeReplace",[v.contents,e],{state:n.state,previousState:c}),p.html(v.contents);var y=p.find("input[autofocus], textarea[autofocus]").last()[0];if(y&&document.activeElement!==y&&y.focus(),g(v.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==l){var _=u(v.url);_.hash=l,n.state.url=_.href,window.history.replaceState(n.state,v.title,_.href);var j=t(_.hash);j.length&&t(window).scrollTop(j.offset().top)}i("pjax:success",[s,o,a,e])}else r(v.url)},n.state||(n.state={id:h(),url:window.location.href,title:document.title,container:p.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(n.state,document.title)),(o=n.xhr)&&o.readyState<4&&(o.onreadystatechange=t.noop,o.abort()),n.options=e,(o=n.xhr=t.ajax(e)).readyState>0&&(e.push&&!e.replace&&(y(n.state.id,p.clone().contents()),window.history.pushState(null,"",c(e.requestUrl))),i("pjax:start",[o,e]),i("pjax:send",[o,e])),n.xhr}function o(e,i){var s={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return n(t.extend(s,p(e,i)))}function r(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function a(e){var i=n.state,s=e.state;if(s&&s.container){if(w&&x==s.url)return;if(n.state&&n.state.id===s.id)return;var o=t(s.container);if(o.length){var a,l=S[s.id];n.state&&_(a=n.state.id<s.id?"forward":"back",n.state.id,o.clone().contents());var h=t.Event("pjax:popstate",{state:s,direction:a});o.trigger(h);var c={id:s.id,url:s.url,container:o,push:!1,fragment:s.fragment,timeout:s.timeout,scrollTo:!1};if(l){o.trigger("pjax:start",[null,c]),n.state=s,s.title&&(document.title=s.title);var u=t.Event("pjax:beforeReplace",{state:s,previousState:i});o.trigger(u,[l,c]),o.html(l),o.trigger("pjax:end",[null,c])}else n(c);o[0].offsetHeight}else r(location.href)}w=!1}function l(e){var i=t.isFunction(e.url)?e.url():e.url,s=e.type?e.type.toUpperCase():"GET",n=t("<form>",{method:"GET"===s?"GET":"POST",action:i,style:"display:none"});"GET"!==s&&"POST"!==s&&n.append(t("<input>",{type:"hidden",name:"_method",value:s.toLowerCase()}));var o=e.data;if("string"==typeof o)t.each(o.split("&"),function(e,i){var s=i.split("=");n.append(t("<input>",{type:"hidden",name:s[0],value:s[1]}))});else if("object"==typeof o)for(key in o)n.append(t("<input>",{type:"hidden",name:key,value:o[key]}));t(document.body).append(n),n.submit()}function h(){return(new Date).getTime()}function c(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function u(t){var e=document.createElement("a");return e.href=t,e}function p(e,i){return e&&i?i.container=e:i=t.isPlainObject(e)?e:{container:e},i.container&&(i.container=d(i.container)),i}function d(e){if((e=t(e)).length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function f(t,e){return t.filter(e).add(t.find(e))}function v(e){return t.parseHTML(e,document,!0)}function m(e,i,s){var n={};if(n.url=c(i.getResponseHeader("X-PJAX-URL")||s.requestUrl),/<html/i.test(e))var o=t(v(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),r=t(v(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else o=r=t(v(e));if(0===r.length)return n;if(n.title=f(o,"title").last().text(),s.fragment){if("body"===s.fragment)var a=r;else a=f(r,s.fragment).first();a.length&&(n.contents=a.contents(),n.title||(n.title=a.attr("title")||a.data("title")))}else/<html/i.test(e)||(n.contents=r);return n.contents&&(n.contents=n.contents.not(function(){return t(this).is("title")}),n.contents.find("title").remove(),n.scripts=f(n.contents,"script[src]").remove(),n.contents=n.contents.not(n.scripts)),n.title&&(n.title=t.trim(n.title)),n}function g(e){if(e){var i=t("script[src]");e.each(function(){var e=this.src;if(!i.filter(function(){return this.src===e}).length){var s=document.createElement("script");s.type=t(this).attr("type"),s.src=t(this).attr("src"),document.head.appendChild(s)}})}}function y(t,e){S[t]=e,I.push(t),j(P,0),j(I,n.defaults.maxCacheLength)}function _(t,e,i){var s,o;S[e]=i,"forward"===t?(s=I,o=P):(s=P,o=I),s.push(e),(e=o.pop())&&delete S[e],j(s,n.defaults.maxCacheLength)}function j(t,e){for(;t.length>e;)delete S[t.shift()]}function b(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function C(){t.fn.pjax=e,t.pjax=n,t.pjax.enable=t.noop,t.pjax.disable=k,t.pjax.click=i,t.pjax.submit=s,t.pjax.reload=o,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:b},t(window).on("popstate.pjax",a)}function k(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=C,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",a)}var w=!0,x=window.location.href,T=window.history.state;T&&T.container&&(n.state=T),"state"in window.history&&(w=!1);var S={},P=[],I=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?C():k()}(jQuery),
/*! jQuery UI - v1.12.1 - 2022-02-09
* http://jqueryui.com
* Includes: widget.js, data.js, keycode.js, scroll-parent.js, widgets/draggable.js, widgets/droppable.js, widgets/sortable.js, widgets/mouse.js, widgets/slider.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.ui=t.ui||{};t.ui.version="1.12.1";
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var e,i=0,s=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{(s=t._data(n,"events"))&&s.remove&&t(n).triggerHandler("remove")}catch(r){}e(i)}),t.widget=function(e,i,s){var n,o,r,a={},l=e.split(".")[0],h=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(r=new i).options=t.widget.extend({},r.options),t.each(s,function(e,s){t.isFunction(s)?a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}():a[e]=s}),o.prototype=t.widget.extend(r,{widgetEventPrefix:n&&r.widgetEventPrefix||e},a,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,n,o=s.call(arguments,1),r=0,a=o.length;r<a;r++)for(i in o[r])n=o[r][i],o[r].hasOwnProperty(i)&&n!==undefined&&(t.isPlainObject(n)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):e[i]=n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,a=s.call(arguments,1),l=this;return r?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,a))!==s&&i!==undefined?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):l=undefined:(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},e=(s=e.split(".")).shift(),s.length){for(n=r[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return n[e]===undefined?null:n[e];n[e]=i}else{if(1===arguments.length)return this.options[e]===undefined?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var r,a;for(a=0;a<i.length;a++)r=n.classesElementLookup[i[a]]||t(),r=e.add?t(t.unique(r.get().concat(e.element.get()))):t(r.not(e.element).get()),n.classesElementLookup[i[a]]=r,s.push(i[a]),o&&e.classes[i[a]]&&s.push(e.classes[i[a]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,r){function a(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?o[r]:r).apply(o,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,a):i.on(h,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,r=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){var r;"string"==typeof n&&(n={effect:n});var a=n?!0===n||"number"==typeof n?i:n.effect||i:e;"number"==typeof(n=n||{})&&(n={duration:n}),r=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),r&&t.effects&&t.effects.effect[a]?s[e](n):a!==e&&s[a]?s[a](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}});t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!s||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var n=!1;t(document).on("mouseup",function(){n=!1});t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;n<o.length;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")};
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",e,s))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];this.relativeContainer=null,n.containment?"window"!==n.containment?"document"!==n.containment?n.containment.constructor!==Array?("parent"===n.containment&&(n.containment=this.helper[0].parentNode),(s=(i=t(n.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=n.containment:this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(n=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-r.grid[1]:n+r.grid[1]:n,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,r=s.scrollParentNotHidden[0],a=s.document[0];r!==a&&"HTML"!==r.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+r.offsetHeight-e.pageY<n.scrollSensitivity?r.scrollTop=o=r.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+r.offsetWidth-e.pageX<n.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(a).scrollTop()<n.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<n.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(a).scrollLeft()<n.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<n.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+n.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,r,a,l,h,c,u,p,d,f=s.options,v=f.snapTolerance,m=i.offset.left,g=m+s.helperProportions.width,y=i.offset.top,_=y+s.helperProportions.height;for(p=s.snapElements.length-1;p>=0;p--)h=(l=s.snapElements[p].left-s.margins.left)+s.snapElements[p].width,u=(c=s.snapElements[p].top-s.margins.top)+s.snapElements[p].height,g<l-v||m>h+v||_<c-v||y>u+v||!t.contains(s.snapElements[p].item.ownerDocument,s.snapElements[p].item)?(s.snapElements[p].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[p].item})),s.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-_)<=v,o=Math.abs(u-y)<=v,r=Math.abs(l-g)<=v,a=Math.abs(h-m)<=v,n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),d=n||o||r||a,"outer"!==f.snapMode&&(n=Math.abs(c-y)<=v,o=Math.abs(u-_)<=v,r=Math.abs(l-m)<=v,a=Math.abs(h-g)<=v,n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[p].snapping&&(n||o||r||a||d)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[p].item})),s.snapElements[p].snapping=n||o||r||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,r=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});r.length&&(n=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}});t.ui.draggable;
/*!
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&o(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return n=!0,!1}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var o=t.ui.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,a=o+e.helperProportions.width,l=r+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,p=c+i.proportions().height;switch(s){case"fit":return h<=o&&a<=u&&c<=r&&l<=p;case"intersect":return h<o+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&c<r+e.helperProportions.height/2&&l-e.helperProportions.height/2<p;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,h,i.proportions().width);case"touch":return(r>=c&&r<=p||l>=c&&l<=p||r<c&&l>p)&&(o>=h&&o<=u||a>=h&&a<=u||o<h&&a>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;s<o.length;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;n<a.length;n++)if(a[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===r&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&o(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,r,a=o(e,this,this.options.tolerance,i),l=!a&&this.isover?"isout":a&&!this.isover?"isover":null;l&&(this.options.greedy&&(n=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===n})).length&&((s=t(r[0]).droppable("instance")).greedyChild="isover"===l)),s&&"isover"===l&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,i),s&&"isout"===l&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});t.ui.droppable,t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,o.widgetName+"-item")===o)return s=t(this),!1}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),!!s&&(!(this.options.handle&&!i&&(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),!n))&&(this.currentItem=s,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,s){var n,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,r=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-this.document.scrollTop()<r.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),e.pageX-this.document.scrollLeft()<r.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=(s=this.items[i]).item[0],(o=this._intersectsWithPointer(s))&&s.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===n||t.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,r=o+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+h>a&&s+h<l,p="y"===this.options.axis||e+c>o&&e+c<r,d=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?d:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!s||!n)&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){a.push(this)}var s,n,o,r,a=[],l=[],h=this._connectWith();if(h&&e)for(s=h.length-1;s>=0;s--)for(n=(o=t(h[s],this.document[0])).length-1;n>=0;n--)(r=t.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&l.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,r,a,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(s=(n=t(p[i],this.document[0])).length-1;s>=0;s--)(o=t.data(n[s],this.widgetFullName))&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(r=u[i][1],s=0,h=(a=u[i][0]).length;s<h;s++)(l=t(a[s])).data(this.widgetName+"-item",r),c.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var i,s,n,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(s=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,s=(e=e||this).options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){i&&!s.forcePlaceholderSize||(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,r,a,l,h,c,u,p=null,d=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(p&&t.contains(this.containers[i].element[0],p.element[0]))continue;p=this.containers[i],d=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(n=1e4,o=null,r=(c=p.floating||this._isFloating(this.currentItem))?"left":"top",a=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[d].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(l=this.items[s].item.offset()[r],h=!1,e[u]-l>this.items[s][a]/2&&(h=!0),Math.abs(e[u]-l)<n&&(n=Math.abs(e[u]-l),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),s[0].style.width&&!i.forceHelperSize||s.width(this.currentItem.width()),s[0].style.height&&!i.forceHelperSize||s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,r=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)"auto"!==this._storedCSS[s]&&"static"!==this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",r=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;e<i;e++)r.push(o);this.handles=n.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),
this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,r,a,l,h=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-h.values(e));(n>i||n===i&&(e===h._lastChangedValue||h.values(e)===c.min))&&(n=i,o=t(this),r=e)}),!1!==this._start(e,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),a=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-o.width()/2,top:e.pageY-a.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(s=i/e)>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:e!==undefined?e:this.value()};return this._hasMultipleValues()&&(s.value=e!==undefined?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n=this.value(),o=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),n=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(s,i):Math.max(s,i)),o[e]=i),i!==n&&!1!==this._trigger("slide",t,this._uiHash(e,i,o))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;o<s.length;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,n,o,r=this.options.range,a=this.options,l=this,h=!this._animateOff&&a.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(s-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},a.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,s,n,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,o)))return}switch(n=this.options.step,i=s=this._hasMultipleValues()?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+n);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-n)}this._slide(e,o,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}});
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */}),document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(t,e,i){var s;if("string"==typeof t){if(0===t.indexOf("#")&&(t=t.slice(1)),vjs.players[t])return vjs.players[t];s=vjs.el(t)}else s=t;if(!s||!s.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return s.player||new vjs.Player(s,e,i)},videojs=vjs;window.videojs=window.vjs=vjs,vjs.CDN_VERSION="4.3",vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://",vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'},"GENERATED_CDN_VSN"!==vjs.CDN_VERSION&&(videojs.options.flash.swf=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf"),vjs.players={},vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(t){var e,i;for(var s in e=(t=t||{}).init||t.init||this.prototype.init||this.prototype.init||function(){},(i=function(){e.apply(this,arguments)}).prototype=vjs.obj.create(this.prototype),i.prototype.constructor=i,i.extend=vjs.CoreObject.extend,i.create=vjs.CoreObject.create,t)t.hasOwnProperty(s)&&(i.prototype[s]=t[s]);return i},vjs.CoreObject.create=function(){var t=vjs.obj.create(this.prototype);return this.apply(t,arguments),t},vjs.on=function(t,e,i){var s=vjs.getData(t);s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),i.guid||(i.guid=vjs.guid++),s.handlers[e].push(i),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e){if(!s.disabled){e=vjs.fixEvent(e);var i=s.handlers[e.type];if(i)for(var n=i.slice(0),o=0,r=n.length;o<r&&!e.isImmediatePropagationStopped();o++)n[o].call(t,e)}}),1==s.handlers[e].length&&(document.addEventListener?t.addEventListener(e,s.dispatcher,!1):document.attachEvent&&t.attachEvent("on"+e,s.dispatcher))},vjs.off=function(t,e,i){if(vjs.hasData(t)){var s=vjs.getData(t);if(s.handlers){var n=function(e){s.handlers[e]=[],vjs.cleanUpEvents(t,e)};if(e){var o=s.handlers[e];if(o)if(i){if(i.guid)for(var r=0;r<o.length;r++)o[r].guid===i.guid&&o.splice(r--,1);vjs.cleanUpEvents(t,e)}else n(e)}else for(var a in s.handlers)n(a)}}},vjs.cleanUpEvents=function(t,e){var i=vjs.getData(t);0===i.handlers[e].length&&(delete i.handlers[e],document.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):document.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),vjs.isEmpty(i.handlers)&&(delete i.handlers,delete i.dispatcher,delete i.disabled),vjs.isEmpty(i)&&vjs.removeData(t)},vjs.fixEvent=function(t){function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped){var s=t||window.event;for(var n in t={},s)"layerX"!==n&&"layerY"!==n&&(t[n]=s[n]);if(t.target||(t.target=t.srcElement||document),t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement,t.preventDefault=function(){s.preventDefault&&s.preventDefault(),t.returnValue=!1,t.isDefaultPrevented=e},t.isDefaultPrevented=i,t.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),t.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!=t.clientX){var o=document.documentElement,r=document.body;t.pageX=t.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}t.which=t.charCode||t.keyCode,null!=t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t},vjs.trigger=function(t,e){var i=vjs.hasData(t)?vjs.getData(t):{},s=t.parentNode||t.ownerDocument;if("string"==typeof e&&(e={type:e,target:t}),e=vjs.fixEvent(e),i.dispatcher&&i.dispatcher.call(t,e),s&&!e.isPropagationStopped()&&!1!==e.bubbles)vjs.trigger(s,e);else if(!s&&!e.isDefaultPrevented()){var n=vjs.getData(e.target);e.target[e.type]&&(n.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),n.disabled=!1)}return!e.isDefaultPrevented()},vjs.one=function(t,e,i){var s=function(){vjs.off(t,e,s),i.apply(this,arguments)};s.guid=i.guid=i.guid||vjs.guid++,vjs.on(t,e,s)};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(t,e){var i,s;for(s in i=document.createElement(t||"div"),e)hasOwnProp.call(e,s)&&(-1!==s.indexOf("aria-")||"role"==s?i.setAttribute(s,e[s]):i[s]=e[s]);return i},vjs.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},vjs.obj={},vjs.obj.create=Object.create||function(t){function e(){}return e.prototype=t,new e},vjs.obj.each=function(t,e,i){for(var s in t)hasOwnProp.call(t,s)&&e.call(i||this,s,t[s])},vjs.obj.merge=function(t,e){if(!e)return t;for(var i in e)hasOwnProp.call(e,i)&&(t[i]=e[i]);return t},vjs.obj.deepMerge=function(t,e){var i,s,n;for(i in t=vjs.obj.copy(t),e)hasOwnProp.call(e,i)&&(s=t[i],n=e[i],vjs.obj.isPlain(s)&&vjs.obj.isPlain(n)?t[i]=vjs.obj.deepMerge(s,n):t[i]=e[i]);return t},vjs.obj.copy=function(t){return vjs.obj.merge({},t)},vjs.obj.isPlain=function(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object},vjs.bind=function(t,e,i){e.guid||(e.guid=vjs.guid++);var s=function(){return e.apply(t,arguments)};return s.guid=i?i+"_"+e.guid:e.guid,s},vjs.cache={},vjs.guid=1,vjs.expando="vdata"+(new Date).getTime(),vjs.getData=function(t){var e=t[vjs.expando];return e||(e=t[vjs.expando]=vjs.guid++,vjs.cache[e]={}),vjs.cache[e]},vjs.hasData=function(t){var e=t[vjs.expando];return!(!e||vjs.isEmpty(vjs.cache[e]))},vjs.removeData=function(t){var e=t[vjs.expando];if(e){delete vjs.cache[e];try{delete t[vjs.expando]}catch(i){t.removeAttribute?t.removeAttribute(vjs.expando):t[vjs.expando]=null}}},vjs.isEmpty=function(t){for(var e in t)if(null!==t[e])return!1;return!0},vjs.addClass=function(t,e){-1==(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className=""===t.className?e:t.className+" "+e)},vjs.removeClass=function(t,e){var i,s;if(-1!=t.className.indexOf(e)){for(s=(i=t.className.split(" ")).length-1;s>=0;s--)i[s]===e&&i.splice(s,1);t.className=i.join(" ")}},vjs.TEST_VID=vjs.createEl("video"),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT),vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD,vjs.IOS_VERSION=function(){var t=vjs.USER_AGENT.match(/OS (\d+)_/i);if(t&&t[1])return t[1]}(),vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT),vjs.ANDROID_VERSION=function(){var t,e,i=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return i?(t=i[1]&&parseFloat(i[1]),e=i[2]&&parseFloat(i[2]),t&&e?parseFloat(i[1]+"."+i[2]):t||null):null}(),vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3,vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT),vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT),vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vjs.getAttributeValues=function(t){var e,i,s,n,o;if(e={},i=",autoplay,controls,loop,muted,default,",t&&t.attributes&&t.attributes.length>0)for(var r=(s=t.attributes).length-1;r>=0;r--)n=s[r].name,o=s[r].value,"boolean"!=typeof t[n]&&-1===i.indexOf(","+n+",")||(o=null!==o),e[n]=o;return e},vjs.getComputedDimension=function(t,e){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(i=t["client"+e.substr(0,1).toUpperCase()+e.substr(1)]+"px"),i},vjs.insertFirst=function(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},vjs.support={},vjs.el=function(t){return 0===t.indexOf("#")&&(t=t.slice(1)),document.getElementById(t)},vjs.formatTime=function(t,e){e=e||t;var i=Math.floor(t%60),s=Math.floor(t/60%60),n=Math.floor(t/3600),o=Math.floor(e/60%60),r=Math.floor(e/3600);return(isNaN(t)||t===Infinity)&&(n=s=i="-"),(n=n>0||r>0?n+":":"")+(s=((n||o>=10)&&s<10?"0"+s:s)+":")+(i=i<10?"0"+i:i)},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(t){return(t+"").replace(/^\s+|\s+$/g,"")},vjs.round=function(t,e){return e||(e=0),Math.round(t*Math.pow(10,e))/Math.pow(10,e)},vjs.createTimeRange=function(t,e){return{length:1,start:function(){return t},end:function(){return e}}},vjs.get=function(t,e,i){var s,n;"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("This browser does not support XMLHttpRequest.")}),n=new XMLHttpRequest;try{n.open("GET",t)}catch(o){i(o)}s=0===t.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===t.indexOf("http"),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||s&&0===n.status?e(n.responseText):i&&i())};try{n.send()}catch(o){i&&i(o)}},vjs.setLocalStorage=function(t,e){try{var i=window.localStorage||!1;if(!i)return;i[t]=e}catch(s){22==s.code||1014==s.code?vjs.log("LocalStorage Full (VideoJS)",s):18==s.code?vjs.log("LocalStorage not allowed (VideoJS)",s):vjs.log("LocalStorage Error (VideoJS)",s)}},vjs.getAbsoluteURL=function(t){return t.match(/^https?:\/\//)||(t=vjs.createEl("div",{innerHTML:'<a href="'+t+'">x</a>'}).firstChild.href),t},vjs.log=function(){vjs.log.history=vjs.log.history||[],vjs.log.history.push(arguments),window.console&&window.console.log(Array.prototype.slice.call(arguments))},vjs.findPosition=function(t){var e,i,s,n,o,r,a,l;return t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),e?(i=document.documentElement,s=document.body,n=i.clientLeft||s.clientLeft||0,o=window.pageXOffset||s.scrollLeft,r=e.left+o-n,a=i.clientTop||s.clientTop||0,l=window.pageYOffset||s.scrollTop,{left:r,top:e.top+l-a}):{left:0,top:0}},vjs.Component=vjs.CoreObject.extend({init:function(t,e,i){this.player_=t,this.options_=vjs.obj.copy(this.options_),e=this.options(e),this.id_=e.id||(e.el&&e.el.id?e.el.id:t.id()+"_component_"+vjs.guid++),this.name_=e.name||null,this.el_=e.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(i)}}),vjs.Component.prototype.dispose=function(){if(this.trigger("dispose"),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(t){return t===undefined?this.options_:this.options_=vjs.obj.deepMerge(this.options_,t)},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(t,e){return vjs.createEl(t,e)},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.prototype.name_,vjs.Component.prototype.name=function(){return this.name_},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(t){return this.childIndex_[t]},vjs.Component.prototype.childNameIndex_,vjs.Component.prototype.getChild=function(t){return this.childNameIndex_[t]},vjs.Component.prototype.addChild=function(t,e){var i,s,n;return"string"==typeof t?(n=t,s=(e=e||{}).componentClass||vjs.capitalize(n),e.name=n,i=new window.videojs[s](this.player_||this,e)):i=t,this.children_.push(i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(n=n||i.name&&i.name())&&(this.childNameIndex_[n]=i),"function"==typeof i.el&&i.el()&&this.contentEl().appendChild(i.el()),i},vjs.Component.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===t){e=!0,this.children_.splice(i,1);break}if(e){this.childIndex_[t.id]=null,this.childNameIndex_[t.name]=null;var s=t.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},vjs.Component.prototype.initChildren=function(){var t=this.options_;if(t&&t.children){var e=this;vjs.obj.each(t.children,function(t,i){if(!1!==i){var s=function(){e[t]=e.addChild(t,i)};i.loadEvent||s()}})}},vjs.Component.prototype.buildCSSClass=function(){return""},vjs.Component.prototype.on=function(t,e){return vjs.on(this.el_,t,vjs.bind(this,e)),this},vjs.Component.prototype.off=function(t,e){return vjs.off(this.el_,t,e),this},vjs.Component.prototype.one=function(t,e){return vjs.one(this.el_,t,vjs.bind(this,e)),this},vjs.Component.prototype.trigger=function(t,e){return vjs.trigger(this.el_,t,e),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!0,vjs.Component.prototype.readyQueue_,vjs.Component.prototype.ready=function(t){return t&&(this.isReady_?t.call(this):(this.readyQueue_===undefined&&(this.readyQueue_=[]),this.readyQueue_.push(t))),this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var t=this.readyQueue_;if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)t[e].call(this);this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.addClass=function(t){return vjs.addClass(this.el_,t),this},vjs.Component.prototype.removeClass=function(t){return vjs.removeClass(this.el_,t),this},vjs.Component.prototype.show=function(){return this.el_.style.display="block",this},vjs.Component.prototype.hide=function(){return this.el_.style.display="none",this},vjs.Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},vjs.Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},vjs.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vjs.Component.prototype.width=function(t,e){return this.dimension("width",t,e)},vjs.Component.prototype.height=function(t,e){return this.dimension("height",t,e)},vjs.Component.prototype.dimensions=function(t,e){return this.width(t,!0).height(e)},vjs.Component.prototype.dimension=function(t,e,i){if(e!==undefined)return-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",i||this.trigger("resize"),this;if(!this.el_)return 0;var s=this.el_.style[t],n=s.indexOf("px");return-1!==n?parseInt(s.slice(0,n),10):parseInt(this.el_["offset"+vjs.capitalize(t)],10)},vjs.Component.prototype.onResize,vjs.Component.prototype.emitTapEvents=function(){var t,e,i;t=0,this.on("touchstart",function(){t=(new Date).getTime(),e=!0}),i=function(){e=!1},this.on("touchmove",i),this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",function(){!0===e&&(new Date).getTime()-t<250&&this.trigger("tap")})},vjs.Button=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e);var i=!1;this.on("touchstart",function(t){t.preventDefault(),i=!0}),this.on("touchmove",function(){i=!1});var s=this;this.on("touchend",function(t){i&&s.onClick(t),t.preventDefault()}),this.on("click",this.onClick),this.on("focus",this.onFocus),this.on("blur",this.onBlur)}}),vjs.Button.prototype.createEl=function(t,e){return e=vjs.obj.merge({className:this.buildCSSClass(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0},e),vjs.Component.prototype.createEl.call(this,t,e)},vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)},vjs.Button.prototype.onClick=function(){},vjs.Button.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Button.prototype.onKeyPress=function(t){32!=t.which&&13!=t.which||(t.preventDefault(),this.onClick())},vjs.Button.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),t.on(this.playerEvent,vjs.bind(this,this.update)),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.player_.on("controlsvisible",vjs.bind(this,this.update)),t.ready(vjs.bind(this,this.update)),this.boundEvents={}}}),vjs.Slider.prototype.createEl=function(t,e){return(e=e||{}).className=e.className+" vjs-slider",e=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},e),vjs.Component.prototype.createEl.call(this,t,e)},vjs.Slider.prototype.onMouseDown=function(t){t.preventDefault(),vjs.blockTextSelection(),this.boundEvents.move=vjs.bind(this,this.onMouseMove),this.boundEvents.end=vjs.bind(this,this.onMouseUp),vjs.on(document,"mousemove",this.boundEvents.move),vjs.on(document,"mouseup",this.boundEvents.end),vjs.on(document,"touchmove",this.boundEvents.move),vjs.on(document,"touchend",this.boundEvents.end),this.onMouseMove(t)},vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection(),vjs.off(document,"mousemove",this.boundEvents.move,!1),vjs.off(document,"mouseup",this.boundEvents.end,!1),vjs.off(document,"touchmove",this.boundEvents.move,!1),vjs.off(document,"touchend",this.boundEvents.end,!1),this.update()},vjs.Slider.prototype.update=function(){if(this.el_){var t,e=this.getPercent(),i=this.handle,s=this.bar;if(isNaN(e)&&(e=0),t=e,i){var n=this.el_.offsetWidth,o=i.el().offsetWidth,r=o?o/n:0,a=e*(1-r);t=a+r/2,i.el().style.left=vjs.round(100*a,2)+"%"}s.el().style.width=vjs.round(100*t,2)+"%"}},vjs.Slider.prototype.calculateDistance=function(t){var e,i,s,n,o,r,a,l,h;if(e=this.el_,i=vjs.findPosition(e),o=r=e.offsetWidth,a=this.handle,this.options_.vertical){if(n=i.top,h=t.changedTouches?t.changedTouches[0].pageY:t.pageY,a){var c=a.el().offsetHeight;n+=c/2,r-=c}return Math.max(0,Math.min(1,(n-h+r)/r))}if(s=i.left,l=t.changedTouches?t.changedTouches[0].pageX:t.pageX,a){var u=a.el().offsetWidth;s+=u/2,o-=u}return Math.max(0,Math.min(1,(l-s)/o))},vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onKeyPress=function(t){37==t.which?(t.preventDefault(),this.stepBack()):39==t.which&&(t.preventDefault(),this.stepForward())},vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},vjs.SliderHandle=vjs.Component.extend(),vjs.SliderHandle.prototype.defaultValue=0,vjs.SliderHandle.prototype.createEl=function(t,e){return(e=e||{}).className=e.className+" vjs-slider-handle",e=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},e),vjs.Component.prototype.createEl.call(this,"div",e)},vjs.Menu=vjs.Component.extend(),vjs.Menu.prototype.addItem=function(t){this.addChild(t),t.on("click",vjs.bind(this,function(){this.unlockShowing()}))},vjs.Menu.prototype.createEl=function(){var t=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(t,{className:"vjs-menu-content"});var e=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),vjs.on(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},vjs.MenuItem=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),this.selected(e.selected)}}),vjs.MenuItem.prototype.createEl=function(t,e){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_.label},e))},vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(t){t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-selected",!0)):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-selected",!1))},vjs.MenuButton=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),this.menu=this.createMenu(),this.addChild(this.menu),this.items&&0===this.items.length&&this.hide(),this.on("keyup",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vjs.MenuButton.prototype.buttonPressed_=!1,vjs.MenuButton.prototype.createMenu=function(){var t=new vjs.Menu(this.player_);if(this.options().title&&t.el().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1})),this.items=this.createItems(),this.items)for(var e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(t){t.preventDefault(),32==t.which||13==t.which?this.buttonPressed_?this.unpressButton():this.pressButton():27==t.which&&this.buttonPressed_&&this.unpressButton()},vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0&&this.items[0].el().focus()},vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)},vjs.Player=vjs.Component.extend({init:function(t,e,i){this.tag=t,e=vjs.obj.merge(this.getTagSettings(t),e),this.cache_={},this.poster_=e.poster,this.controls_=e.controls,t.controls=!1,vjs.Component.call(this,this,e,i),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.one("play",function(t){var e={type:"firstplay",target:this.el_};vjs.trigger(this.el_,e)||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("error",this.onError),this.on("fullscreenchange",this.onFullscreenChange),vjs.players[this.id_]=this,e.plugins&&vjs.obj.each(e.plugins,function(t,e){this[t](e)},this),this.listenForUserActivity()}}),vjs.Player.prototype.options_=vjs.options,vjs.Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),vjs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.stopTrackingProgress(),this.stopTrackingCurrentTime(),this.tech&&this.tech.dispose(),vjs.Component.prototype.dispose.call(this)},vjs.Player.prototype.getTagSettings=function(t){var e,i,s,n,o,r={sources:[],tracks:[]};if(vjs.obj.merge(r,vjs.getAttributeValues(t)),t.hasChildNodes())for(n=0,o=(e=t.childNodes).length;n<o;n++)"source"===(s=(i=e[n]).nodeName.toLowerCase())?r.sources.push(vjs.getAttributeValues(i)):"track"===s&&r.tracks.push(vjs.getAttributeValues(i));return r},vjs.Player.prototype.createEl=function(){var t=this.el_=vjs.Component.prototype.createEl.call(this,"div"),e=this.tag;if(e.removeAttribute("width"),e.removeAttribute("height"),e.hasChildNodes()){var i,s,n,o,r;for(s=(i=e.childNodes).length,r=[];s--;)"track"===(o=i[s]).nodeName.toLowerCase()&&r.push(o);for(n=0;n<r.length;n++)e.removeChild(r[n])}return e.id=e.id||"vjs_video_"+vjs.guid++,t.id=e.id,t.className=e.className,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),e.parentNode&&e.parentNode.insertBefore(t,e),vjs.insertFirst(e,t),t},vjs.Player.prototype.loadTech=function(t,e){this.tech?this.unloadTech():"Html5"!==t&&this.tag&&(vjs.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=t,this.isReady_=!1;var i=function(){this.player_.triggerReady(),this.features.progressEvents||this.player_.manualProgressOn(),this.features.timeupdateEvents||this.player_.manualTimeUpdatesOn()},s=vjs.obj.merge({source:e,parentEl:this.el_},this.options_[t.toLowerCase()]);e&&(e.src==this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime),this.cache_.src=e.src),this.tech=new window.videojs[t](this,s),this.tech.ready(i)},vjs.Player.prototype.unloadTech=function(){this.isReady_=!1,this.tech.dispose(),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),this.tech=!1},vjs.Player.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress(),this.tech.one("progress",function(){this.features.progressEvents=!0,this.player_.manualProgressOff()})},vjs.Player.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vjs.Player.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){this.cache_.bufferEnd<this.buffered().end(0)?this.trigger("progress"):1==this.bufferedPercent()&&(this.stopTrackingProgress(),this.trigger("progress"))}),500)},vjs.Player.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)},
/*! Time Tracking -------------------------------------------------------------- */
vjs.Player.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime),this.tech.one("timeupdate",function(){this.features.timeupdateEvents=!0,this.player_.manualTimeUpdatesOff()})},vjs.Player.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},vjs.Player.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=setInterval(vjs.bind(this,function(){this.trigger("timeupdate")}),250)},vjs.Player.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval)},vjs.Player.prototype.onLoadStart,vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing")},vjs.Player.prototype.onFirstPlay=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started")},vjs.Player.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused")},vjs.Player.prototype.onTimeUpdate,vjs.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){this.options_.loop&&(this.currentTime(0),this.play())},vjs.Player.prototype.onDurationChange=function(){this.duration(this.techGet("duration"))},vjs.Player.prototype.onVolumeChange,vjs.Player.prototype.onFullscreenChange=function(){this.isFullScreen?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},vjs.Player.prototype.onError=function(t){vjs.log("Video Error",t)},vjs.Player.prototype.cache_,vjs.Player.prototype.getCache=function(){return this.cache_},vjs.Player.prototype.techCall=function(t,e){if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[t](e)});else try{this.tech[t](e)}catch(i){throw vjs.log(i),i}},vjs.Player.prototype.techGet=function(t){if(this.tech&&this.tech.isReady_)try{return this.tech[t]()}catch(e){throw this.tech[t]===undefined?vjs.log("Video.js: "+t+" method not defined for "+this.techName+" playback technology.",e):"TypeError"==e.name?(vjs.log("Video.js: "+t+" unavailable on "+this.techName+" playback technology element.",e),this.tech.isReady_=!1):vjs.log(e),e}},vjs.Player.prototype.play=function(){return this.techCall("play"),this},vjs.Player.prototype.pause=function(){return this.techCall("pause"),this},vjs.Player.prototype.paused=function(){return!1!==this.techGet("paused")},vjs.Player.prototype.currentTime=function(t){return t!==undefined?(this.cache_.lastSetCurrentTime=t,this.techCall("setCurrentTime",t),this.manualTimeUpdates&&this.trigger("timeupdate"),this):this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(t){return t!==undefined?(this.cache_.duration=parseFloat(t),this):(this.cache_.duration===undefined&&this.onDurationChange(),this.cache_.duration)},vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vjs.Player.prototype.buffered=function(){var t=this.techGet("buffered"),e=0,i=t.length-1,s=this.cache_.bufferEnd=this.cache_.bufferEnd||0;return t&&i>=0&&t.end(i)!==s&&(s=t.end(i),this.cache_.bufferEnd=s),vjs.createTimeRange(e,s)},vjs.Player.prototype.bufferedPercent=function(){return this.duration()?this.buffered().end(0)/this.duration():0},vjs.Player.prototype.volume=function(t){var e;return t!==undefined?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall("setVolume",e),vjs.setLocalStorage("volume",e),this):(e=parseFloat(this.techGet("volume")),isNaN(e)?1:e)},vjs.Player.prototype.muted=function(t){return t!==undefined?(this.techCall("setMuted",t),this):this.techGet("muted")||!1},vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vjs.Player.prototype.requestFullScreen=function(){var t=vjs.support.requestFullScreen;return this.isFullScreen=!0,t?(vjs.on(document,t.eventName,vjs.bind(this,function(){this.isFullScreen=document[t.isFullScreen],!1===this.isFullScreen&&vjs.off(document,t.eventName,arguments.callee),this.trigger("fullscreenchange")})),this.el_[t.requestFn]()):this.tech.supportsFullScreen()?this.techCall("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.cancelFullScreen=function(){var t=vjs.support.requestFullScreen;return this.isFullScreen=!1,t?document[t.cancelFn]():this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vjs.addClass(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},vjs.Player.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullScreen?this.cancelFullScreen():this.exitFullWindow())},vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vjs.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vjs.removeClass(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},vjs.Player.prototype.selectSource=function(t){for(var e=0,i=this.options_.techOrder;e<i.length;e++){var s=vjs.capitalize(i[e]),n=window.videojs[s];if(n.isSupported())for(var o=0,r=t;o<r.length;o++){var a=r[o];if(n.canPlaySource(a))return{source:a,tech:s}}}return!1},vjs.Player.prototype.src=function(t){if(t instanceof Array){var e,i=this.selectSource(t);i?(t=i.source,(e=i.tech)==this.techName?this.src(t):this.loadTech(e,t)):this.el_.appendChild(vjs.createEl("p",{innerHTML:this.options().notSupportedMessage}))}else t instanceof Object?window.videojs[this.techName].canPlaySource(t)?this.src(t.src):this.src([t]):(this.cache_.src=t,this.isReady_?(this.techCall("src",t),"auto"==this.options_.preload&&this.load(),this.options_.autoplay&&this.play()):this.ready(function(){this.src(t)}));return this},vjs.Player.prototype.load=function(){return this.techCall("load"),this},vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vjs.Player.prototype.preload=function(t){return t!==undefined?(this.techCall("setPreload",t),this.options_.preload=t,this):this.techGet("preload")},vjs.Player.prototype.autoplay=function(t){return t!==undefined?(this.techCall("setAutoplay",t),this.options_.autoplay=t,this):this.techGet("autoplay",t)},vjs.Player.prototype.loop=function(t){return t!==undefined?(this.techCall("setLoop",t),this.options_.loop=t,this):this.techGet("loop")},vjs.Player.prototype.poster_,vjs.Player.prototype.poster=function(t){return t!==undefined?(this.poster_=t,this):this.poster_},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(t){return t!==undefined?(t=!!t,this.controls_!==t&&(this.controls_=t,t?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled")):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"))),this):this.controls_},vjs.Player.prototype.usingNativeControls_,vjs.Player.prototype.usingNativeControls=function(t){return t!==undefined?(t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,t?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_},vjs.Player.prototype.error=function(){return this.techGet("error")},vjs.Player.prototype.ended=function(){return this.techGet("ended")},vjs.Player.prototype.seeking=function(){return this.techGet("seeking")},vjs.Player.prototype.userActivity_=!0,vjs.Player.prototype.reportUserActivity=function(){this.userActivity_=!0},vjs.Player.prototype.userActive_=!0,vjs.Player.prototype.userActive=function(t){return t!==undefined?((t=!!t)!==this.userActive_&&(this.userActive_=t,t?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},vjs.Player.prototype.listenForUserActivity=function(){var t,e,i,s,n,o;t=this.reportUserActivity,e=function(){t(),clearInterval(i),i=setInterval(vjs.bind(this,t),250)},s=function(){t(),clearInterval(i)},this.on("mousedown",e),this.on("mousemove",t),this.on("mouseup",s),this.on("keydown",t),this.on("keyup",t),this.on("touchstart",e),this.on("touchmove",t),this.on("touchend",s),this.on("touchcancel",s),n=setInterval(vjs.bind(this,function(){this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),clearTimeout(o),o=setTimeout(vjs.bind(this,function(){this.userActivity_||this.userActive(!1)}),2e3))}),250),this.on("dispose",function(){clearInterval(n),clearTimeout(o)})},function(){var t,e,i;e={},(i=document.createElement("div")).cancelFullscreen!==undefined?(e.requestFn="requestFullscreen",e.cancelFn="exitFullscreen",e.eventName="fullscreenchange",e.isFullScreen="fullScreen"):(document.mozCancelFullScreen?(t="moz",e.isFullScreen=t+"FullScreen"):(t="webkit",e.isFullScreen=t+"IsFullScreen"),i[t+"RequestFullScreen"]&&(e.requestFn=t+"RequestFullScreen",e.cancelFn=t+"CancelFullScreen"),e.eventName=t+"fullscreenchange"),document[e.cancelFn]&&(vjs.support.requestFullScreen=e)}(),vjs.ControlBar=vjs.Component.extend(),vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}},vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})},vjs.PlayToggle=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),t.on("play",vjs.bind(this,this.onPlay)),t.on("pause",vjs.bind(this,this.onPause))}}),vjs.PlayToggle.prototype.buttonText="Play",vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.PlayToggle.prototype.onClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing"),this.el_.children[0].children[0].innerHTML="Pause"},vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused"),this.el_.children[0].children[0].innerHTML="Play"},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.CurrentTimeDisplay.prototype.createEl=function(){var t=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),t.appendChild(vjs.createEl("div").appendChild(this.content)),t},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var t=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+vjs.formatTime(t,this.player_.duration())},vjs.DurationDisplay=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.DurationDisplay.prototype.createEl=function(){var t=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"}),t.appendChild(vjs.createEl("div").appendChild(this.content)),t},vjs.DurationDisplay.prototype.updateContent=function(){var t=this.player_.duration();t&&(this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+vjs.formatTime(t))},vjs.TimeDivider=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var t=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"}),t.appendChild(vjs.createEl("div").appendChild(this.content)),t},vjs.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+vjs.formatTime(this.player_.remainingTime()))},vjs.FullscreenToggle=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.FullscreenToggle.prototype.onClick=function(){this.player_.isFullScreen?(this.player_.cancelFullScreen(),this.el_.children[0].children[0].innerHTML="Fullscreen"):(this.player_.requestFullScreen(),this.el_.children[0].children[0].innerHTML="Non-Fullscreen")},vjs.ProgressControl=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.ProgressControl.prototype.options_={children:{seekBar:{}}},vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},vjs.SeekBar=vjs.Slider.extend({init:function(t,e){vjs.Slider.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateARIAAttributes)),t.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},vjs.SeekBar.prototype.updateARIAAttributes=function(){var t=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(t,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){var t;if("Flash"===this.player_.techName&&this.player_.seeking()){var e=this.player_.getCache();t=e.lastSetCurrentTime?e.lastSetCurrentTime:this.player_.currentTime()}else t=this.player_.currentTime();return t/this.player_.duration()},vjs.SeekBar.prototype.onMouseDown=function(t){vjs.Slider.prototype.onMouseDown.call(this,t),this.player_.scrubbing=!0,this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},vjs.SeekBar.prototype.onMouseMove=function(t){var e=this.calculateDistance(t)*this.player_.duration();e==this.player_.duration()&&(e-=.1),this.player_.currentTime(e)},vjs.SeekBar.prototype.onMouseUp=function(t){vjs.Slider.prototype.onMouseUp.call(this,t),this.player_.scrubbing=!1,this.videoWasPlaying&&this.player_.play()},vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},vjs.LoadProgressBar=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("progress",vjs.bind(this,this.update))}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},vjs.LoadProgressBar.prototype.update=function(){this.el_.style&&(this.el_.style.width=vjs.round(100*this.player_.bufferedPercent(),2)+"%")},vjs.PlayProgressBar=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})},vjs.SeekHandle=vjs.SliderHandle.extend(),vjs.SeekHandle.prototype.defaultValue="00:00",vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle"})},vjs.VolumeControl=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.tech&&t.tech.features&&!1===t.tech.features.volumeControl&&this.addClass("vjs-hidden"),t.on("loadstart",vjs.bind(this,function(){t.tech.features&&!1===t.tech.features.volumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}},vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(t,e){vjs.Slider.call(this,t,e),t.on("volumechange",vjs.bind(this,this.updateARIAAttributes)),t.ready(vjs.bind(this,this.updateARIAAttributes)),setTimeout(vjs.bind(this,this.update),0)}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vjs.VolumeBar.prototype.playerEvent="volumechange",vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},vjs.VolumeBar.prototype.onMouseMove=function(t){this.player_.muted()&&this.player_.muted(!1),this.player_.volume(this.calculateDistance(t))},vjs.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vjs.VolumeLevel=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},vjs.VolumeHandle=vjs.SliderHandle.extend(),vjs.VolumeHandle.prototype.defaultValue="00:00",vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})},vjs.MuteToggle=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),t.on("volumechange",vjs.bind(this,this.update)),t.tech&&t.tech.features&&!1===t.tech.features.volumeControl&&this.addClass("vjs-hidden"),t.on("loadstart",vjs.bind(this,function(){t.tech.features&&!1===t.tech.features.volumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(!this.player_.muted())},vjs.MuteToggle.prototype.update=function(){var t=this.player_.volume(),e=3;0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2),this.player_.muted()?"Unmute"!=this.el_.children[0].children[0].innerHTML&&(this.el_.children[0].children[0].innerHTML="Unmute"):"Mute"!=this.el_.children[0].children[0].innerHTML&&(this.el_.children[0].children[0].innerHTML="Mute");for(var i=0;i<4;i++)vjs.removeClass(this.el_,"vjs-vol-"+i);vjs.addClass(this.el_,"vjs-vol-"+e)},vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(t,e){vjs.MenuButton.call(this,t,e),t.on("volumechange",vjs.bind(this,this.update)),t.tech&&t.tech.features&&!1===t.tech.features.volumeControl&&this.addClass("vjs-hidden"),t.on("loadstart",vjs.bind(this,function(){t.tech.features&&!1===t.tech.features.volumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})),this.addClass("vjs-menu-button")}}),vjs.VolumeMenuButton.prototype.createMenu=function(){var t=new vjs.Menu(this.player_,{contentElType:"div"}),e=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:!0},this.options_.volumeBar));return t.addChild(e),t},vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this),vjs.MenuButton.prototype.onClick.call(this)},vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update,vjs.PosterImage=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),t.poster()&&t.controls()||this.hide(),t.on("play",vjs.bind(this,this.hide))}}),vjs.PosterImage.prototype.createEl=function(){var t=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1}),e=this.player_.poster();return e&&("backgroundSize"in t.style?t.style.backgroundImage='url("'+e+'")':t.appendChild(vjs.createEl("img",{src:e}))),t},vjs.PosterImage.prototype.onClick=function(){this.player().controls()&&this.player_.play()},vjs.LoadingSpinner=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("canplay",vjs.bind(this,this.hide)),t.on("canplaythrough",vjs.bind(this,this.hide)),t.on("playing",vjs.bind(this,this.hide)),t.on("seeked",vjs.bind(this,this.hide)),t.on("seeking",vjs.bind(this,this.show)),t.on("seeked",vjs.bind(this,this.hide)),t.on("error",vjs.bind(this,this.show)),t.on("waiting",vjs.bind(this,this.show))}}),vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()},vjs.MediaTechController=vjs.Component.extend({init:function(t,e,i){vjs.Component.call(this,t,e,i),this.initControlsListeners()}}),vjs.MediaTechController.prototype.initControlsListeners=function(){var t,e,i;e=this,t=this.player();var s=function(){t.controls()&&!t.usingNativeControls()&&e.addControlsListeners()};i=vjs.bind(e,e.removeControlsListeners),this.ready(s),t.on("controlsenabled",s),t.on("controlsdisabled",i)},vjs.MediaTechController.prototype.addControlsListeners=function(){var t,e;this.on("mousedown",this.onClick),this.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),e=this.player_.userActive()}),t=function(t){t.stopPropagation(),e&&this.player_.reportUserActivity()},this.on("touchmove",t),this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",t),this.emitTapEvents(),this.on("tap",this.onTap)},vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vjs.MediaTechController.prototype.onClick=function(t){0===t.button&&this.player().controls()&&(this.player().paused()?this.player().play():this.player().pause())},vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vjs.MediaTechController.prototype.features={volumeControl:!0,fullscreenResize:!1,progressEvents:!1,timeupdateEvents:!1},vjs.media={},vjs.media.ApiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");for(var i=vjs.media.ApiMethods.length-1;i>=0;i--){var methodName=vjs.media.ApiMethods[i];vjs.MediaTechController.prototype[vjs.media.ApiMethods[i]]=createMethod(methodName)}vjs.Html5=vjs.MediaTechController.extend({init:function(t,e,i){this.features.volumeControl=vjs.Html5.canControlVolume(),this.features.movingMediaElementInDOM=!vjs.IS_IOS,this.features.fullscreenResize=!0,vjs.MediaTechController.call(this,t,e,i);var s=e.source;s&&this.el_.currentSrc===s.src&&this.el_.networkState>0?t.trigger("loadstart"):s&&(this.el_.src=s.src),vjs.TOUCH_ENABLED&&!1!==t.options().nativeControlsForTouch&&this.useNativeControls(),t.ready(function(){this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())}),this.setupTriggers(),this.triggerReady()}}),vjs.Html5.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Html5.prototype.createEl=function(){var t,e=this.player_,i=e.tag;i&&!1!==this.features.movingMediaElementInDOM||(i?(t=i.cloneNode(!1),vjs.Html5.disposeMediaElement(i),i=t,e.tag=null):i=vjs.createEl("video",{id:e.id()+"_html5_api",className:"vjs-tech"}),i.player=e,vjs.insertFirst(i,e.el()));for(var s=["autoplay","preload","loop","muted"],n=s.length-1;n>=0;n--){var o=s[n];null!==e.options_[o]&&(i[o]=e.options_[o])}return i},vjs.Html5.prototype.setupTriggers=function(){for(var t=vjs.Html5.Events.length-1;t>=0;t--)vjs.on(this.el_,vjs.Html5.Events[t],vjs.bind(this.player_,this.eventHandler))},vjs.Html5.prototype.eventHandler=function(t){this.trigger(t),t.stopPropagation()},vjs.Html5.prototype.useNativeControls=function(){var t,e,i,s,n;t=this,e=this.player(),t.setControls(e.controls()),i=function(){t.setControls(!0)},s=function(){t.setControls(!1)},e.on("controlsenabled",i),e.on("controlsdisabled",s),n=function(){e.off("controlsenabled",i),e.off("controlsdisabled",s)},t.on("dispose",n),e.on("usingcustomcontrols",n),e.usingNativeControls(!0)},vjs.Html5.prototype.play=function(){this.el_.play()},vjs.Html5.prototype.pause=function(){this.el_.pause()},vjs.Html5.prototype.paused=function(){return this.el_.paused},vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime},vjs.Html5.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}},vjs.Html5.prototype.duration=function(){return this.el_.duration||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(t){this.el_.volume=t},vjs.Html5.prototype.muted=function(){return this.el_.muted},vjs.Html5.prototype.setMuted=function(t){this.el_.muted=t},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){return!("function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(vjs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))},vjs.Html5.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vjs.Html5.prototype.src=function(t){this.el_.src=t},vjs.Html5.prototype.load=function(){this.el_.load()},vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc},vjs.Html5.prototype.preload=function(){return this.el_.preload},vjs.Html5.prototype.setPreload=function(t){this.el_.preload=t},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(t){this.el_.autoplay=t},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(t){this.el_.controls=!!t},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(t){this.el_.loop=t},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.isSupported=function(){return!!vjs.TEST_VID.canPlayType},vjs.Html5.canPlaySource=function(t){try{return!!vjs.TEST_VID.canPlayType(t.type)}catch(e){return""}},vjs.Html5.canControlVolume=function(){var t=vjs.TEST_VID.volume;return vjs.TEST_VID.volume=t/2+.1,t!==vjs.TEST_VID.volume},vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vjs.Html5.disposeMediaElement=function(t){if(t){for(t.player=null,t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&t.load()}},vjs.IS_OLD_ANDROID&&(document.createElement("video").constructor.prototype.canPlayType=function(t){return t&&-1!=t.toLowerCase().indexOf("video/mp4")?"maybe":""}),vjs.Flash=vjs.MediaTechController.extend({init:function(t,e,i){vjs.MediaTechController.call(this,t,e,i);var s=e.source,n=e.parentEl,o=this.el_=vjs.createEl("div",{id:t.id()+"_temp_flash"}),r=t.id()+"_flash_api",a=t.options_,l=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:a.autoplay,preload:a.preload,loop:a.loop,muted:a.muted},e.flashVars),h=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},e.params),c=vjs.obj.merge({id:r,name:r,"class":"vjs-tech"},e.attributes);if(s)if(s.type&&vjs.Flash.isStreamingType(s.type)){var u=vjs.Flash.streamToParts(s.src);l.rtmpConnection=encodeURIComponent(u.connection),l.rtmpStream=encodeURIComponent(u.stream)}else l.src=encodeURIComponent(vjs.getAbsoluteURL(s.src));if(vjs.insertFirst(o,n),e.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(e.startTime)}),!0!==e.iFrameMode||vjs.IS_FIREFOX)vjs.Flash.embed(e.swf,o,l,h,c);else{var p=vjs.createEl("iframe",{id:r+"_iframe",name:r+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});l.readyFunction="ready",l.eventProxyFunction="events",l.errorEventProxyFunction="errors",vjs.on(p,"load",vjs.bind(this,function(){var t,i=p.contentWindow;(t=p.contentDocument?p.contentDocument:p.contentWindow.document).write(vjs.Flash.getEmbedCode(e.swf,l,h,c)),i.player=this.player_,i.ready=vjs.bind(this.player_,function(e){var i=t.getElementById(e),s=this.tech;s.el_=i,vjs.Flash.checkReady(s)}),i.events=vjs.bind(this.player_,function(t,e){var i=this;i&&"flash"===i.techName&&i.trigger(e)}),i.errors=vjs.bind(this.player_,function(t,e){vjs.log("Flash Error",e)})})),o.parentNode.replaceChild(p,o)}}}),vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Flash.prototype.play=function(){this.el_.vjs_play()},vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()},vjs.Flash.prototype.src=function(t){if(vjs.Flash.isStreamingSrc(t)?(t=vjs.Flash.streamToParts(t),this.setRtmpConnection(t.connection),this.setRtmpStream(t.stream)):(t=vjs.getAbsoluteURL(t),this.el_.vjs_src(t)),this.player_.autoplay()){var e=this;setTimeout(function(){e.play()},0)}},vjs.Flash.prototype.currentSrc=function(){var t=this.el_.vjs_getProperty("currentSrc");if(null==t){var e=this.rtmpConnection(),i=this.rtmpStream();e&&i&&(t=vjs.Flash.streamFromParts(e,i))}return t},vjs.Flash.prototype.load=function(){this.el_.vjs_load()},vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},
vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))},vjs.Flash.prototype.supportsFullScreen=function(){return!1},vjs.Flash.prototype.enterFullScreen=function(){return!1};var api=vjs.Flash.prototype,readWrite="rtmpConnection,rtmpStream,preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),createSetter=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);api["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}},createGetter=function(t){api[t]=function(){return this.el_.vjs_getProperty(t)}};if(function(){var t;for(t=0;t<readWrite.length;t++)createGetter(readWrite[t]),createSetter(readWrite[t]);for(t=0;t<readOnly.length;t++)createGetter(readOnly[t])}(),vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10},vjs.Flash.canPlaySource=function(t){var e;return t.type?(e=t.type.replace(/;.*/,"").toLowerCase())in vjs.Flash.formats||e in vjs.Flash.streamingFormats?"maybe":void 0:""},vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},vjs.Flash.onReady=function(t){var e=vjs.el(t),i=e.player||e.parentNode.player,s=i.tech;e.player=i,s.el_=e,vjs.Flash.checkReady(s)},vjs.Flash.checkReady=function(t){t.el().vjs_getProperty?t.triggerReady():setTimeout(function(){vjs.Flash.checkReady(t)},50)},vjs.Flash.onEvent=function(t,e){vjs.el(t).player.trigger(e)},vjs.Flash.onError=function(t,e){vjs.el(t).player.trigger("error"),vjs.log("Flash Error",e,t)},vjs.Flash.version=function(){var t="0,0,0";try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(i){}}return t.split(",")},vjs.Flash.embed=function(t,e,i,s,n){var o=vjs.Flash.getEmbedCode(t,i,s,n),r=vjs.createEl("div",{innerHTML:o}).childNodes[0],a=e.parentNode;e.parentNode.replaceChild(r,e);var l=a.childNodes[0];return setTimeout(function(){l.style.display="block"},1e3),r},vjs.Flash.getEmbedCode=function(t,e,i,s){var n='<object type="application/x-shockwave-flash"',o="",r="",a="";return e&&vjs.obj.each(e,function(t,e){o+=t+"="+e+"&amp;"}),i=vjs.obj.merge({movie:t,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},i),vjs.obj.each(i,function(t,e){r+='<param name="'+t+'" value="'+e+'" />'}),s=vjs.obj.merge({data:t,width:"100%",height:"100%"},s),vjs.obj.each(s,function(t,e){a+=t+'="'+e+'" '}),n+a+">"+r+"</object>"},vjs.Flash.streamFromParts=function(t,e){return t+"&"+e},vjs.Flash.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var i,s=t.indexOf("&");return-1!==s?i=s+1:0===(s=i=t.lastIndexOf("/")+1)&&(s=i=t.length),e.connection=t.substring(0,s),e.stream=t.substring(i,t.length),e},vjs.Flash.isStreamingType=function(t){return t in vjs.Flash.streamingFormats},vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i,vjs.Flash.isStreamingSrc=function(t){return vjs.Flash.RTMP_RE.test(t)},vjs.MediaLoader=vjs.Component.extend({init:function(t,e,i){if(vjs.Component.call(this,t,e,i),t.options_.sources&&0!==t.options_.sources.length)t.src(t.options_.sources);else for(var s=0,n=t.options_.techOrder;s<n.length;s++){var o=vjs.capitalize(n[s]),r=window.videojs[o];if(r&&r.isSupported()){t.loadTech(o);break}}}}),vjs.Player.prototype.textTracks_,vjs.Player.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||[],this.textTracks_},vjs.Player.prototype.addTextTrack=function(t,e,i,s){var n=this.textTracks_=this.textTracks_||[];(s=s||{}).kind=t,s.label=e,s.language=i;var o=vjs.capitalize(t||"subtitles"),r=new window.videojs[o+"Track"](this,s);return n.push(r),r},vjs.Player.prototype.addTextTracks=function(t){for(var e,i=0;i<t.length;i++)e=t[i],this.addTextTrack(e.kind,e.label,e.language,e);return this},vjs.Player.prototype.showTextTrack=function(t,e){for(var i,s,n,o=this.textTracks_,r=0,a=o.length;r<a;r++)(i=o[r]).id()===t?(i.show(),s=i):e&&i.kind()==e&&i.mode()>0&&i.disable();return(n=s?s.kind():e||!1)&&this.trigger(n+"trackchange"),this},vjs.TextTrack=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),this.id_=e.id||"vjs_"+e.kind+"_"+e.language+"_"+vjs.guid++,this.src_=e.src,this.dflt_=e["default"]||e.dflt,this.title_=e.title,this.language_=e.srclang,this.label_=e.label,this.cues_=[],this.activeCues_=[],this.readyState_=0,this.mode_=0,this.player_.on("fullscreenchange",vjs.bind(this,this.adjustFontSize))}}),vjs.TextTrack.prototype.kind_,vjs.TextTrack.prototype.kind=function(){return this.kind_},vjs.TextTrack.prototype.src_,vjs.TextTrack.prototype.src=function(){return this.src_},vjs.TextTrack.prototype.dflt_,vjs.TextTrack.prototype.dflt=function(){return this.dflt_},vjs.TextTrack.prototype.title_,vjs.TextTrack.prototype.title=function(){return this.title_},vjs.TextTrack.prototype.language_,vjs.TextTrack.prototype.language=function(){return this.language_},vjs.TextTrack.prototype.label_,vjs.TextTrack.prototype.label=function(){return this.label_},vjs.TextTrack.prototype.cues_,vjs.TextTrack.prototype.cues=function(){return this.cues_},vjs.TextTrack.prototype.activeCues_,vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_},vjs.TextTrack.prototype.readyState_,vjs.TextTrack.prototype.readyState=function(){return this.readyState_},vjs.TextTrack.prototype.mode_,vjs.TextTrack.prototype.mode=function(){return this.mode_},vjs.TextTrack.prototype.adjustFontSize=function(){this.player_.isFullScreen?this.el_.style.fontSize=screen.width/this.player_.width()*1.4*100+"%":this.el_.style.fontSize=""},vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-"+this.kind_+" vjs-text-track"})},vjs.TextTrack.prototype.show=function(){this.activate(),this.mode_=2,vjs.Component.prototype.show.call(this)},vjs.TextTrack.prototype.hide=function(){this.activate(),this.mode_=1,vjs.Component.prototype.hide.call(this)},vjs.TextTrack.prototype.disable=function(){2==this.mode_&&this.hide(),this.deactivate(),this.mode_=0},vjs.TextTrack.prototype.activate=function(){0===this.readyState_&&this.load(),0===this.mode_&&(this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.on("ended",vjs.bind(this,this.reset,this.id_)),"captions"!==this.kind_&&"subtitles"!==this.kind_||this.player_.getChild("textTrackDisplay").addChild(this))},vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.off("ended",vjs.bind(this,this.reset,this.id_)),this.reset(),this.player_.getChild("textTrackDisplay").removeChild(this)},vjs.TextTrack.prototype.load=function(){0===this.readyState_&&(this.readyState_=1,vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError)))},vjs.TextTrack.prototype.onError=function(t){this.error=t,this.readyState_=3,this.trigger("error")},vjs.TextTrack.prototype.parseCues=function(t){for(var e,i,s,n,o=t.split("\n"),r="",a=1,l=o.length;a<l;a++)if(r=vjs.trim(o[a])){for(-1==r.indexOf("-->")?(n=r,r=vjs.trim(o[++a])):n=this.cues_.length,e={id:n,index:this.cues_.length},i=r.split(" --> "),e.startTime=this.parseCueTime(i[0]),e.endTime=this.parseCueTime(i[1]),s=[];o[++a]&&(r=vjs.trim(o[a]));)s.push(r);e.text=s.join("<br/>"),this.cues_.push(e)}this.readyState_=2,this.trigger("loaded")},vjs.TextTrack.prototype.parseCueTime=function(t){var e,i,s,n,o,r=t.split(":"),a=0;return 3==r.length?(e=r[0],i=r[1],s=r[2]):(e=0,i=r[0],s=r[1]),n=(n=(s=s.split(/\s+/)).splice(0,1)[0]).split(/\.|,/),o=parseFloat(n[1]),n=n[0],a+=3600*parseFloat(e),a+=60*parseFloat(i),a+=parseFloat(n),o&&(a+=o/1e3),a},vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var t=this.player_.currentTime();if(this.prevChange===undefined||t<this.prevChange||this.nextChange<=t){var e,i,s,n,o=this.cues_,r=this.player_.duration(),a=0,l=!1,h=[];for(t>=this.nextChange||this.nextChange===undefined?n=this.firstActiveIndex!==undefined?this.firstActiveIndex:0:(l=!0,n=this.lastActiveIndex!==undefined?this.lastActiveIndex:o.length-1);;){if((s=o[n]).endTime<=t)a=Math.max(a,s.endTime),s.active&&(s.active=!1);else if(t<s.startTime){if(r=Math.min(r,s.startTime),s.active&&(s.active=!1),!l)break}else l?(h.splice(0,0,s),i===undefined&&(i=n),e=n):(h.push(s),e===undefined&&(e=n),i=n),r=Math.min(r,s.endTime),a=Math.max(a,s.startTime),s.active=!0;if(l){if(0===n)break;n--}else{if(n===o.length-1)break;n++}}this.activeCues_=h,this.nextChange=r,this.prevChange=a,this.firstActiveIndex=e,this.lastActiveIndex=i,this.updateDisplay(),this.trigger("cuechange")}}},vjs.TextTrack.prototype.updateDisplay=function(){for(var t=this.activeCues_,e="",i=0,s=t.length;i<s;i++)e+='<span class="vjs-tt-cue">'+t[i].text+"</span>";this.el_.innerHTML=e},vjs.TextTrack.prototype.reset=function(){this.nextChange=0,this.prevChange=this.player_.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0},vjs.CaptionsTrack=vjs.TextTrack.extend(),vjs.CaptionsTrack.prototype.kind_="captions",vjs.SubtitlesTrack=vjs.TextTrack.extend(),vjs.SubtitlesTrack.prototype.kind_="subtitles",vjs.ChaptersTrack=vjs.TextTrack.extend(),vjs.ChaptersTrack.prototype.kind_="chapters",vjs.TextTrackDisplay=vjs.Component.extend({init:function(t,e,i){vjs.Component.call(this,t,e,i),t.options_.tracks&&t.options_.tracks.length>0&&this.player_.addTextTracks(t.options_.tracks)}}),vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})},vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(t,e){var i=this.track=e.track;e.label=i.label(),e.selected=i.dflt(),vjs.MenuItem.call(this,t,e),this.player_.on(i.kind()+"trackchange",vjs.bind(this,this.update))}}),vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.TextTrackMenuItem.prototype.update=function(){this.selected(2==this.track.mode())},vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(t,e){e.track={kind:function(){return e.kind},player:t,label:function(){return e.kind+" off"},dflt:function(){return!1},mode:function(){return!1}},vjs.TextTrackMenuItem.call(this,t,e),this.selected(!0)}}),vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.OffTextTrackMenuItem.prototype.update=function(){for(var t,e=this.player_.textTracks(),i=0,s=e.length,n=!0;i<s;i++)(t=e[i]).kind()==this.track.kind()&&2==t.mode()&&(n=!1);this.selected(n)},vjs.TextTrackButton=vjs.MenuButton.extend({init:function(t,e){vjs.MenuButton.call(this,t,e),this.items.length<=1&&this.hide()}}),vjs.TextTrackButton.prototype.createItems=function(){var t,e=[];e.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var i=0;i<this.player_.textTracks().length;i++)(t=this.player_.textTracks()[i]).kind()===this.kind_&&e.push(new vjs.TextTrackMenuItem(this.player_,{track:t}));return e},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(t,e,i){vjs.TextTrackButton.call(this,t,e,i),this.el_.setAttribute("aria-label","Captions Menu")}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(t,e,i){vjs.TextTrackButton.call(this,t,e,i),this.el_.setAttribute("aria-label","Subtitles Menu")}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.className="vjs-subtitles-button",vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(t,e,i){vjs.TextTrackButton.call(this,t,e,i),this.el_.setAttribute("aria-label","Chapters Menu")}}),vjs.ChaptersButton.prototype.kind_="chapters",vjs.ChaptersButton.prototype.buttonText="Chapters",vjs.ChaptersButton.prototype.className="vjs-chapters-button",vjs.ChaptersButton.prototype.createItems=function(){for(var t,e=[],i=0;i<this.player_.textTracks().length;i++)(t=this.player_.textTracks()[i]).kind()===this.kind_&&e.push(new vjs.TextTrackMenuItem(this.player_,{track:t}));return e},vjs.ChaptersButton.prototype.createMenu=function(){for(var t,e,i=this.player_.textTracks(),s=0,n=i.length,o=this.items=[];s<n;s++)if((t=i[s]).kind()==this.kind_&&t.dflt()){if(t.readyState()<2)return this.chaptersTrack=t,void t.on("loaded",vjs.bind(this,this.createMenu));e=t;break}var r=this.menu=new vjs.Menu(this.player_);if(r.el_.appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1})),e){var a,l,h=e.cues_;for(s=0,n=h.length;s<n;s++)a=h[s],l=new vjs.ChaptersTrackMenuItem(this.player_,{track:e,cue:a}),o.push(l),r.addChild(l)}return this.items.length>0&&this.show(),r},vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(t,e){var i=this.track=e.track,s=this.cue=e.cue,n=t.currentTime();e.label=s.text,e.selected=s.startTime<=n&&n<s.endTime,vjs.MenuItem.call(this,t,e),i.on("cuechange",vjs.bind(this,this.update))}}),vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},vjs.ChaptersTrackMenuItem.prototype.update=function(){var t=this.cue,e=this.player_.currentTime();this.selected(t.startTime<=e&&e<t.endTime)},vjs.obj.merge(vjs.ControlBar.prototype.options_.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}}),vjs.JSON,"undefined"!=typeof window.JSON&&"function"===window.JSON.parse)vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){function walk(t,e){var i,s,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(t,e,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var t,e,i=document.getElementsByTagName("video");if(i&&i.length>0)for(var s=0,n=i.length;s<n;s++){if(!(e=i[s])||!e.getAttribute){vjs.autoSetupTimeout(1);break}e.player===undefined&&null!==(t=e.getAttribute("data-setup"))&&(t=vjs.JSON.parse(t||"{}"),videojs(e,t))}else vjs.windowLoaded||vjs.autoSetupTimeout(1)},vjs.autoSetupTimeout=function(t){setTimeout(vjs.autoSetup,t)},"complete"===document.readyState?vjs.windowLoaded=!0:vjs.one(window,"load",function(){vjs.windowLoaded=!0}),vjs.autoSetupTimeout(1),vjs.plugin=function(t,e){vjs.Player.prototype[t]=e},function(){var t;t=function(){function t(t,e){this.selector=t,this.matchingURLClickHandler=e,this.bindClickEvent()}return t.prototype.bindClickEvent=function(){return $(document).on("click",this.selector,(t=this,function(e){var i;if(i=$(e.currentTarget).attr("href"),t.isValidURL(i))return e.preventDefault(),t.matchingURLClickHandler(i,e.target)}));var t},t.prototype.isValidURL=function(t){var e;return void 0!==t&&"#"!==t&&void 0!==(e=t.match(/^\/(?:(?:(articles|cases|users)\/(.+([^\/])+))|supporters)$/))&&"new"!==e[2]},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).UrlRedirector=t}.call(this),function(){var t;t=function(){function t(t){this.Image=t,this.queue=[],this.working=0,this.workers=4,this.pause()}return t.prototype.enqueue=function(t){var e;if(0!==(e=this.queue.indexOf(t))&&!t.isLoaded())return e>=1?this.queue=this.queue.slice(e).concat(this.queue.slice(0,e)):this.queue.push(t),this.work()},t.prototype.remove=function(t){var e;return(e=this.queue.indexOf(t))>=0&&this.queue.splice(e,1),this.pause()},t.prototype.queueLength=function(){var t,e,i,s;for(t=0,e=0,i=(s=this.queue).length;e<i;e++)t+=s[e].remainingItemsCount();return t},t.prototype.resume=function(){return this.paused=!1,this.work()},t.prototype.pause=function(){return this.paused=!0},t.prototype.work=function(){var t,e,i;if(!this.paused){for(t=[];this.working<this.workers&&this.queueLength()>0;)i=this.queue[0].nextStudyToLoad(),e=this,t.push(function(t,i){var s,n;if(i)if(i.hasFetchedStacks())if(n=i.nextStackToLoad())if(s=n.nextImageToLoad()){if(!(s.content_type.indexOf("video")>=0))return s.img=new this.Image,e.working++,$(s.img).on("load",function(){return e.working--,n.addLoadedImage(s),e.work()}).on("error",function(){var t;return s.fullscreen_filename.match(/.+\.jpeg$/)?(t=s.public_filename.match(/\.\w+$/)[0],s.fullscreen_filename=s.fullscreen_filename.replace(/\.jpeg$/,t),s.img.src=s.fullscreen_filename):s.fullscreen_filename!==s.public_filename?(s.fullscreen_filename=s.public_filename,s.img.src=s.fullscreen_filename):(e.working--,e.work())}),s.img.src=s.fullscreen_filename;n.addLoadedImage(s)}else $(n).trigger("load");else $(i).trigger("load");else e.pause()}(0,i));return t}},t.prototype.prioritise=function(t){var e;if(!(this.queue.length<2||(e=this.queue.indexOf(t))<1))return this.queue=this.queue.slice(e).concat(this.queue.slice(0,e))},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).CaseLoader=t}.call(this),function(){var t;t=function(){function t(t,e){var i,s,n,o,r,a;for(this.images=t.images.slice(),this.modality=t.modality,this.featuredStatus=t.has_featured_or_upcoming_image,this.loadedImages=[],this.stackKeyImageIndex=null,this.caseKeyImageIndex=null,this.loadingPaused=!0,this.previousIndex=null,this.thumbnailEl=e,n=0,o=(r=this.images).length;n<o;n++)(s=r[n]).is_stack_key_image&&(a=s),s.is_case_key_image&&(i=s);this.imagesToLoad=this.images.slice(),this.posterImage=this.images[0],this.images.sort(function(t,e){return t.position-e.position}),this.currentIndex=this.images.indexOf(this.posterImage),null!=i&&(this.caseKeyImageIndex=this.images.indexOf(i)),this.stackKeyImageIndex=this.images.indexOf(a)}return t.prototype.updateStackThumbnail=function(t){return this.thumbnailEl.attr("src",t)},t.prototype.setCurrentAsStackKeyImage=function(){return this.stackKeyImageIndex>=0&&(this.images[this.stackKeyImageIndex].is_stack_key_image=!1),this.stackKeyImageIndex=Math.round(this.currentIndex),this.images[this.stackKeyImageIndex].is_stack_key_image=!0},t.prototype.setCurrentAsCaseKeyImage=function(){return this.caseKeyImageIndex=this.images.indexOf(this.currentImage()),this.images[this.caseKeyImageIndex].is_case_key_image=!0},t.prototype.resetCaseKeyImage=function(){if(null!=this.caseKeyImageIndex)return this.images[this.caseKeyImageIndex].is_case_key_image=!1,this.caseKeyImageIndex=null},t.prototype.toggleAttributeIsActive=function(t){if("boolean"==typeof this.images[Math.round(this.currentIndex)][t])return this.images[Math.round(this.currentIndex)][t]=!this.images[Math.round(this.currentIndex)][t]},t.prototype.nextImageToLoad=function(){return this.imagesToLoad.shift()},t.prototype.addLoadedImage=function(t){if(-1===this.loadedImages.indexOf(t)&&(this.loadedImages.push(t),$(this).trigger("load-image",t)),this.isLoaded()&&$(this).trigger("stack:load:full"),this.isLoaded())return $(this).trigger("load")},t.prototype.isLoaded=function(){return this.loadedImages.length===this.size()},t.prototype.size=function(){return this.images.length},t.prototype.numberOfImagesRemainingToLoad=function(){return this.size()-this.loadedImages.length},t.prototype.imageAtIndex=function(t){return 0<=t&&t<this.size()?this.images[t].image:null},t.prototype.currentImage=function(){return this.images[Math.round(this.currentIndex)]},t.prototype.delta=function(t){return this.currentIndex=Math.min(Math.max(this.currentIndex-t,0),this.size()-1)},t.prototype.setCurrentIndex=function(t){return this.currentIndex=Math.min(Math.max(t,0),this.size()-1)},t.prototype.startLoadingImages=function(){var t,e;for(this.loadingPaused=!1,e=[],t=0;t<8;++t)e.push(this.loadNextStackImage());return e},t.prototype.stopLoadingImages=function(){return this.loadingPaused=!0},t.prototype.loadNextStackImage=function(){var t,e,i;if(this.imagesToLoad.length>0&&!this.loadingPaused){for(t=this.imagesToLoad.shift();t.content_type.indexOf("video")>=0;)if(null==(t=this.imagesToLoad.shift()))return;return e=new Image,$(e).on("load",(i=this,function(){return i.addLoadedImage(e),i.loadNextStackImage()})).on("error",function(i){return function(){var s;return t.fullscreen_filename.match(/.+\.jpeg$/)?(s=t.public_filename.match(/\.\w+$/)[0],t.fullscreen_filename=t.fullscreen_filename.replace(/\.jpeg$/,s),e.src=t.fullscreen_filename):t.fullscreen_filename!==t.public_filename?(t.fullscreen_filename=t.public_filename,e.src=t.fullscreen_filename):i.loadNextStackImage()}}(this)),e.src=t.fullscreen_filename}},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).Stack=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.prioritise=e(this.prioritise,this),this.id=t,this.loadedStacks=[]}return t.prototype.fetchStacks=function(t,e){var i,s;return null!=this.stacks?e():t?(this.stacks=function(){var e,s,n;for(n=[],e=0,s=t.length;e<s;e++)i=t[e],n.push(this.createStack(i));return n}.call(this),this.stacksToLoad=this.stacks.slice(0),e()):$.ajax({type:"GET",dataType:"JSON",url:"/studies/"+this.id+"/stacks",success:(s=this,function(t){var n,o;if(null==s.stacks){for(s.stacks=[],n=0,o=t.length;n<o;n++)i=t[n],s.stacks.push(s.createStack(i));return s.stacksToLoad=s.stacks.slice(0),e()}}),error:function(){}})},t.prototype.createStack=function(t){var e,i;return e=new Stack(t),$(e).on("load",(i=this,function(){return i.addLoadedStack(e)})),$(this).trigger("preload-stack-video",[e]),e},t.prototype.hasFetchedStacks=function(){return null!=this.stacks},t.prototype.nextStackToLoad=function(){return this.stacksToLoad[0]},t.prototype.addLoadedStack=function(t){var e;if(-1!==(e=this.stacksToLoad.indexOf(t))&&(this.stacksToLoad.splice(e,1),this.loadedStacks.push(t),this.isLoaded()))return $(this).trigger("load")},t.prototype.isLoaded=function(){return this.loadedStacks.length===this.size()},t.prototype.size=function(){return this.stacks.length},t.prototype.sizeOfStacksToBeLoaded=function(){var t;return t=0,this.hasFetchedStacks()&&(t=this.stacksToLoad.length),t},t.prototype.hasStacks=function(){return this.stacks.length>0},t.prototype.firstStack=function(){if(this.hasStacks())return this.stacks[0]},t.prototype.stackAtIndex=function(t){return this.stacks[t]},t.prototype.totalRemainingToLoad=function(){var t,e,i,s;for(s=0,t=0,e=(i=this.stacks).length;t<e;t++)s+=i[t].numberOfImagesRemainingToLoad();return s},t.prototype.prioritise=function(t){var e;if(!(this.stacksToLoad.length<=1||(e=this.stacksToLoad.indexOf(t))<1))return this.stacksToLoad=this.stacksToLoad.slice(e).concat(this.stacksToLoad.slice(0,e))},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).Study=t}.call(this),function(){var t;t=function(){function t(t,e){this.id=t,this.loadedStudies=[],this.components=e}return t.prototype.loadStudies=function(t,e){var i,s,n;return null!=this.studies?e():t?(this.studies=function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)s=t[e],n.push(this.createStudy(s));return n}.call(this),e()):(i="/cases/"+this.id+"/studies"+(window.location.search||""),$.ajax({type:"GET",dataType:"JSON",url:i,success:(n=this,function(t){if(null==n.studies)return n.studies=function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)s=t[e],n.push(this.createStudy(s));return n}.call(n),e()}),error:function(){}}))},t.prototype.createStudy=function(t){var e,i;return e=new Study(t),$(e).on("load",(i=this,function(){return i.addLoadedStudy(e)})),$(e).on("preload-stack-video",function(t){return function(e,i){return $(t).trigger("preload-stack-video",[i])}}(this)),e},t.prototype.refreshCurrentStudy=function(t){var e,i,s,n,o;if(null!=this.studies){if(this.currentStudy=null,this.currentStudyIndex=0,"introduction"===t)this.studies.length&&(this.currentStudy=this.studies[0]);else if("conclusion"===t||"discussion"===t)this.currentStudyIndex=this.size(),this.currentStudy=null;else{for(i=null,n=!1,s=0;s<components.length;){if((e=components[s]).id===t){if("Study"===e.type){i=t;break}n=!0}else if(n&&"Study"===e.type){i=e.id;break}s++}i&&(o=this.studies.filter(function(t){return t.id===i}),this.currentStudy=o[0],this.currentStudyIndex=this.studies.indexOf(this.currentStudy))}return this.studiesToLoad=this.studies.slice(this.currentStudyIndex),this.loadedStudies=[]}},t.prototype.nextStudyToLoad=function(){return this.studiesToLoad[0]},t.prototype.addLoadedStudy=function(t){var e,i;if(-1!==(e=this.studiesToLoad.indexOf(t))){if(this.studiesToLoad.splice(e,1),this.loadedStudies.push(t),this.isLoaded())return $(this).trigger("load");if(!offlineMode)return this.nextStudyToLoad().fetchStacks(null,(i=this,function(){return $(i).trigger("study-load")}))}},t.prototype.isLoaded=function(){return this.loadedStudies.length+this.currentStudyIndex===this.size()},t.prototype.size=function(){return this.studies.length},t.prototype.sizeOfStudiesToBeLoaded=function(){return this.studiesToLoad.length},t.prototype.remainingItemsCount=function(){var t,e,i,s;if(this.isLoaded())return 0;for(t=0,e=0,i=(s=this.studiesToLoad).length;e<i;e++)t+=s[e].sizeOfStacksToBeLoaded();return t},t.prototype.hasStudies=function(){return this.studies.length>0},t.prototype.firstStudy=function(){if(this.hasStudies())return this.studies[0]},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).Case=t}.call(this),function(t){var e=t(window);t.fn.visible=function(t,i,s){if(!(this.length<1)){var n=this.length>1?this.eq(0):this,o=n.get(0),r=e.width(),a=e.height(),l=(s=s||"both",!0!==i||o.offsetWidth*o.offsetHeight);if("function"==typeof o.getBoundingClientRect){var h=o.getBoundingClientRect(),c=h.top>=0&&h.top<a,u=h.bottom>0&&h.bottom<=a,p=h.left>=0&&h.left<r,d=h.right>0&&h.right<=r,f=t?c||u:c&&u,v=t?p||d:p&&d;if("both"===s)return l&&f&&v;if("vertical"===s)return l&&f;if("horizontal"===s)return l&&v}else{var m=e.scrollTop(),g=m+a,y=e.scrollLeft(),_=y+r,j=n.offset(),b=j.top,C=b+n.height(),k=j.left,w=k+n.width(),x=!0===t?C:b,T=!0===t?b:C,S=!0===t?w:k,P=!0===t?k:w;if("both"===s)return!!l&&g>=T&&x>=m&&_>=P&&S>=y;if("vertical"===s)return!!l&&g>=T&&x>=m;if("horizontal"===s)return!!l&&_>=P&&S>=y}}}}(jQuery),function(){var t;t=function(){function t(t){var e,i,s,n;this.el=$(t),this.img=this.el.children("img"),this.inView=!0,this.scrollEnabled=!1,this.toolbar=$('<div class="clearfix stack-view-toolbar"></div>'),this.el.append(this.toolbar),s=$('<div class="relative-fill offline-workflow-outer-wrapper"></div>'),i=$('<div class="relative-fill offline-workflow-image-wrapper"></div>').css({margin:"0 auto"}),e=$('<div class="relative-fill offline-workflow-control-wrapper"></div>'),this.img.wrap(i),this.imageWrapper=this.img.parent(),this.imageWrapper.wrap(e),this.controlWrapper=this.imageWrapper.parent(),this.controlWrapper.wrap(s),this.outerWrapper=this.controlWrapper.parent(),this.loader=$("<span class='stack-image-loader'></span>"),this.outerWrapper.prepend(this.loader),this.img.on("load",(n=this,function(){return n.windowResized(),n.img.show(),n.loader.text("")})),this.img.on("click",function(t){return function(){if(t.stackIsCropPending())return window.location.reload()}}(this)),this.attachToggleScrollButtons(),this.attachScrollbar(),this.scrollbar.hide(),this.toggleScrollWrapper.hide(),this.attachModalityLabel(),this.insertLoaderTimeout=null,$(document).on("keydown",function(t){return function(e){if(!0===window.stackViewHovering){if(38===e.which)return t.scrollBy(1);if(40===e.which)return t.scrollBy(-1)}}}(this)),$(window).resize(function(t){return function(){return t.windowResized()}}(this)),$(window).scroll(function(t){return function(){return t.windowScrolled()}}(this))}return window.stackViewHovering=!1,t.prototype.attachToggleScrollButtons=function(){var t;return this.toggleScrollWrapper=$('<div class="stack-toggle-scroll-wrapper"></div>'),this.toolbar.append(this.toggleScrollWrapper),this.enableScrollButton=$('<button class="stack-scroll-button stack-scroll-button-enable">Scroll Stack</button>'),this.disableScrollButton=$('<button class="hidden stack-scroll-button stack-scroll-button-disable">Scroll Stack</button>'),this.toggleScrollWrapper.append(this.enableScrollButton,this.disableScrollButton),$(this.enableScrollButton).on("click",(t=this,function(){return t.scrollbar.show(),t.enableScroll(),t.enableScrollButton.addClass("hidden"),t.disableScrollButton.removeClass("hidden")})),$(this.disableScrollButton).on("click",function(t){return function(){return t.enableScrollButton.removeClass("hidden"),t.disableScrollButton.addClass("hidden"),t.disableScroll()}}(this))},t.prototype.disableScroll=function(){return this.scrollEnabled=!1,this.scrollbar.hide(),this.outerWrapper.off()},t.prototype._findTouch=function(t,e){var i,s,n,o;if(null==t||null==e)return null;for(i=s=0,n=t.length;0<=n?s<n:s>n;i=0<=n?++s:--s)if((o=t.item(i)).identifier===e)return o;return null},t.prototype.enableScroll=function(){var t;if(!this.scrollEnabled)return this.scrollEnabled=!0,this.outerWrapper.mousewheel((t=this,function(e){var i;return e.preventDefault(),i=e.deltaY,e.deltaFactor<=2&&(i/=25),t.scrollBy(Math.min(1,Math.max(-1,i)))})).on("touchstart",function(t){return function(e){var i,s,n;if(n=null!=(i=e.originalEvent)&&null!=(s=i.touches)?s.item(0):void 0,1===e.originalEvent.touches.length&&null!=n)return t.lastTouchY=n.pageY,t.trackingTouchId=n.identifier}}(this)).on("touchmove",function(t){return function(e){var i,s,n;if(!(e.originalEvent.touches.length>1)){if(null==(n=t._findTouch(null!=(s=e.originalEvent)?s.touches:void 0,t.trackingTouchId)))return;return e.preventDefault(),i=n.pageY-t.lastTouchY,t.scrollBy(i/t.outerWrapper.height()*t.stack.size()),t.lastTouchY=n.pageY}}}(this)).on("touchend",function(t){return function(e){if("undefined"!=typeof trackingTouch&&null!==trackingTouch)return e.preventDefault(),t.trackingTouchId=null}}(this)).on("mouseenter",function(){return window.stackViewHovering=!0}).on("mouseleave",function(){return window.stackViewHovering=!1})},t.prototype.scrollBy=function(t){var e;if(this.stack.delta(t),!((e=this.stack.currentImage()).content_type.indexOf("video")>=0))return this.setImage(e)},t.prototype.setImage=function(t){var e;if(null!=t)return this.removeVideo(),this.hideStackVideo(),$(this).trigger("setImage"),"application/x.stackvideo"===t.content_type?(this.img.hide(),this.presentStackVideo(t)):t.content_type.indexOf("video")>=0?(this.img.hide(),this.presentVideo(t)):t.crop_pending?this.img.attr("src",$("img#cropping-in-progress").attr("src")):this.img.filter(":visible").attr("src")!==t.fullscreen_filename&&(this.img.attr("src",t.fullscreen_filename),this.img.on("error",(e=this,function(){var i,s;return e.img.attr("src").match(/.+\.jpeg$/)?(i=t.public_filename.match(/\.\w+$/)[0],s=t.fullscreen_filename.replace(/\.jpeg$/,i),e.img.attr("src",s)):e.img.attr("src")!==t.public_filename?e.img.attr("src",t.public_filename):void 0})),this.insertLoader()),this.updateScrollbar()},t.prototype.insertLoader=function(){return null!=this.insertLoaderTimeout&&clearTimeout(this.insertLoaderTimeout),this.insertLoaderTimeout=setTimeout((t=this,function(){var e;if(!(null!=(e=t.img[0])?e.complete:void 0))return t.loader.text("Loading Image "+(Math.round(t.stack.currentIndex)+1))}),2e3);var t},t.prototype.removeVideo=function(){return this.imageWrapper.find(".video-link, .video-js-box").remove()},t.prototype.presentVideo=function(t){var e,i;return i='<!-- Begin VideoJS -->\n<div class="video-js-box">\n  <video class="video-js vjs-default-skin vjs-big-play-centered" width="630" height="630" controls preload="none" loop>\n    <source type="video/mp4" />\n  </video>\n</div>\n<!-- End VideoJS -->',i=$(i),0===(e=this.imageWrapper.height())&&(e=this.imageWrapper.width()/4*3),$("video source",i).attr("src",t.public_filename),$("video, object",i).attr({id:t.id,width:this.imageWrapper.width(),height:e}),this.img.hide(),i.appendTo(this.imageWrapper),
this.activateVideos()},t.prototype.hideStackVideo=function(){return this.imageWrapper.find(".stack-video-js-box").hide()},t.prototype.presentStackVideo=function(t){return this.img.hide(),$("#stack-video-"+t.stack_video_props.id).insertBefore(this.modalityLabel).show(),$(window).trigger("resize")},t.prototype.preloadStackVideo=function(t){var e,i;if(1===t.images.length&&"application/x.stackvideo"===t.images[0].content_type)return(e=$("<div></div>").attr({"class":"stack-video-js-box",id:"stack-video-"+t.images[0].stack_video_props.id})).hide(),e.appendTo("html"),i=Object.assign({stack:t},t.images[0].stack_video_props),window.ReactAttachMethods[".StackVideo"](e[0],i)},t.prototype.activateVideos=function(){return this.el.find("video:visible").each(function(){return videojs(this,{preload:"none"})})},t.prototype.attachScrollbar=function(){var t;return this.scrollbar=$('<div class="scrollbar"><div class="track"><div class="knob"></div></div><a class="up" href="#"></a><a class="down" href="#"></a></div>').appendTo(this.controlWrapper),this.scrollKnob=this.scrollbar.find(".knob"),this.scrollKnob.draggable({containment:"parent",axis:"y",drag:(t=this,function(e,i){var s,n,o;if(o=(i.offset.top-t.scrollKnob.parent().offset().top+2.5)/t.scrollKnob.parent().height(),s=Math.round(o*t.stack.size()),t.stack.setCurrentIndex(s),!((n=t.stack.currentImage()).content_type.indexOf("video")>=0))return t.setImage(n)})}),this.scrollbar.find(".up").on("click",function(t){return function(e){return e.preventDefault(),t.scrollBy(1)}}(this)),this.scrollbar.find(".down").on("click",function(t){return function(e){return e.preventDefault(),t.scrollBy(-1)}}(this))},t.prototype.updateScrollbar=function(){if(this.scrollKnob.css({top:this.stack.currentIndex/this.stack.size()*100+"%"}),this.deviceIsTouch())return this.multipleImageStack()?(this.enableScrollButton.show(),this.disableScrollButton.show()):(this.enableScrollButton.hide(),this.disableScrollButton.hide())},t.prototype.attachModalityLabel=function(){return this.modalityLabel=$('<div class="modality"></div>').appendTo(this.imageWrapper)},t.prototype.updateModalityLabel=function(){var t,e,i;return t=this.stack.currentImage(),i=this.stack.modality,e="",t.perspective&&(e=t.perspective),t.specifics&&(e=e?e+" "+t.specifics:t.specifics),i&&e?i=i+": "+e:e&&(i=e),this.modalityLabel.text(i)},t.prototype.setStack=function(t){var e;return this.stack=t,this.resizeScrollKnob(),this.hideOrShowScroll(),e=this.stack.currentImage(),this.resizeForImage(e),this.setImage(e),this.updateModalityLabel()},t.prototype.currentImage=function(){return this.stack.currentImage()},t.prototype.windowResized=function(){if(null!=this.stack)return this.resizeForImage(this.stack.currentImage())},t.prototype.windowScrolled=function(){if(this.stackController.stacksToLoad.length>0&&(this.el.visible(!0)||!Radiopaedia.galleryLoading)){if(!this.inView)return this.inView=!0,$(this).trigger("startLoadingNextStack"),Radiopaedia.galleryLoading=!0}else if(Radiopaedia.galleryLoading)return this.inView=!1},t.prototype.resizeForImage=function(t){return this.dataAttributes().mobile&&this.dataAttributes().fullscreen?this.resizeForImageInMobile(t):this.resizeForImageInDesktop(t)},t.prototype.resizeForImageInMobile=function(t){var e,i,s,n,o,r;if(0!==(e=$("#largeImage")).length)return r=$(window).height(),n=$("#footer-mobile").height(),i=$("#navTab").height(),s=Math.max(r-i-n-20,220),e.css("height",s+20+"px"),this.outerWrapper.css("width",e.width()-20),this.outerWrapper.css("height",s-20),o=t.height>t.width?(s-60)/t.height:t.height<t.width?(e.width()-60)/t.width:(Math.min(s,e.width())-60)/t.width,this.img.css("height",t.height*o),this.img.css("width",t.width*o),this.imageWrapper.css("height",t.height*o),this.imageWrapper.css("width",t.width*o),this.controlWrapper.css("height",t.height*o),this.controlWrapper.css("width","100%"),this.scrollbar.css("right",0),this.scrollbar.css("top",0)},t.prototype.resizeForImageInDesktop=function(t){var e,i,s,n,o,r,a,l;if(i="application/x.stackvideo"===t.content_type,!(t.content_type.indexOf("video")>=0)||i)return l=this.el.width()/t.width,s=(e=this.el.height()/t.height)>0?Math.min(l,e):l,n=t.height*s,o=t.width*s,(r=i?$("#stack-video-"+t.stack_video_props.id+" canvas"):this.img).css("height",n),r.css("width",o),this.imageWrapper.width(o),this.imageWrapper.height(n),a=0,r.outerHeight()<this.outerWrapper.height()&&(a=Math.round((this.outerWrapper.height()-r.outerHeight())/2)),r.css({position:"absolute",top:a+"px",left:0}),r.attr({id:"offline-workflow-study-large-image"});this.resizeForVideo(t)},t.prototype.resizeForVideo=function(){return this.imageWrapper.css({width:"100%"})},t.prototype.knobHeight=function(){return 1/this.stack.size()*100},t.prototype.resizeScrollKnob=function(){return this.scrollKnob.height(this.knobHeight()+"%")},t.prototype.hideOrShowScroll=function(){return this.multipleImageStack()&&!this.stackIsCropPending()?this.deviceIsTouch()?this.dataAttributes().fullscreen?(this.scrollbar.show(),this.enableScroll()):this.toggleScrollWrapper.show():(this.scrollbar.show(),this.enableScroll()):this.disableScroll()},t.prototype.deviceIsTouch=function(){return"undefined"!=typeof window.ontouchstart||window.force_touch_for_tests},t.prototype.stackIsCropPending=function(){return this.stack.currentImage().crop_pending},t.prototype.dataAttributes=function(){return $("body").data()},t.prototype.multipleImageStack=function(){return this.stack.size()>1},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).StackView=t}.call(this),function(){var t;t=function(){function t(t){var e;this.imageContainer=t,this.image=t.children("img"),this.image.on("load",(e=this,function(){return e.rePositionImageVertically()})),$(window).resize(function(t){return function(){return t.rePositionImageVertically()}}(this))}return t.prototype.rePositionImageVertically=function(){var t,e,i;return t=parseInt(this.image.css("padding-top")),e=parseInt(this.image.css("padding-bottom"))+t,i=(this.imageContainer.height()-this.image.height()-e)/2,this.imageContainer.css("padding-top",i)},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).SlideImageCenterer=t}.call(this),function(){var t;t=function(){function t(t){this.el=$(t),this.thumbnails=this.el.find("a"),this.bindThumbs()}return t.prototype.bindThumbs=function(){var t;return t=this,this.thumbnails.click(function(e){return e.preventDefault(),t.thumbClick($(this))})},t.prototype.clickFirst=function(){return this.thumbnails.first().click()},t.prototype.thumbClick=function(t){var e;if(!((e=this.thumbnails.index(t))<0))return t.hasClass("active")?void 0:(this.thumbnails.removeClass("active"),t.addClass("active"),t.trigger("thumb-click",e))},t.prototype.setLoading=function(t,e){return e?this.addLoader(this.thumbnails.eq(t)):this.removeLoader(this.thumbnails.eq(t))},t.prototype.addLoader=function(t){var e,i,s,n;return(i=t.find("img")).wrap('<div class="loader"></div>'),n=i.parent(),e=$('<div class="bar"><div class="progress"></div></div>').appendTo(n),s=function(){return n.width(i.outerWidth()),e.css({top:i.position().top+i.height()-3})},i.prop("complete")?s():i.load(s)},t.prototype.updateProgress=function(t,e){var i,s;return s=this.thumbnails.eq(t),i=Math.round(100*Math.max(0,Math.min(e,1))),s.find(".loader .progress").css({width:i+"%"})},t.prototype.removeLoader=function(t){return t.find(".bar").fadeOut("fast",function(){if(t.find("img").parent().is("div.loader"))return t.find("img").unwrap()})},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).ThumbnailsView=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};window.caseLoadLimit=3,t=function(){function t(){var t,i,s;this.enqueueNextStudy=e(this.enqueueNextStudy,this),this.enqueueNextCase=e(this.enqueueNextCase,this),(t=!("undefined"!=typeof currentCaseID&&null!==currentCaseID||"undefined"!=typeof caseIDs&&null!==caseIDs))&&this.setupSlide(),$("#footer").is(":visible")?this.footer=new FooterNav("#footer .pagination","#header #nextBtn","#header #prevBtn"):$("#footer-mobile").is(":visible")&&(this.footer=new MobileFooterNav("#footer-mobile","#header #nextBtn","#header #prevBtn")),this.rating_in_body=new RatingWidget(".actionBar .rating"),this.numberofCasesLoaded=0,t||(this.setupCases(),this.setupImages()),i={container:"#content",timeout:5e3},offlineMode||$('#offline-workflow-page-links[data-disable-pjax="true"')[0]||$("#wrapper").pjax(".pjax",i).on("pjax:start",function(){return Radiopaedia.loader.show()}).on("pjax:end",function(){return Radiopaedia.loader.hide()}).on("pjax:success",(s=this,function(){return null!=window.ga&&ga("send","pageview"),null!=s.footer&&s.footer.update(),s.setupImages(),s.rating_in_body=new RatingWidget(".actionBar .rating")})),$(window).hashchange(function(t){return function(){return t.hashchange()}}(this)),$(window).hashchange()}return t.prototype.setupCases=function(){var t;if(!$(".StudyViewer >.hidden.data")[0])return"undefined"!=typeof caseIDs&&null!==caseIDs?this.cases=function(){var e,i,s;for(s=[],e=0,i=caseIDs.length;e<i;e++)t=caseIDs[e],s.push(this.createCase(t));return s}.call(this):this.cases=[this.createCase(currentCaseID)]},t.prototype.setupSlide=function(){return this.slideImageCenterer=new SlideImageCenterer($("#largeImage"))},t.prototype.createCase=function(t){var e,i;return t===currentCaseID&&"undefined"!=typeof components&&null!==components?(e=new Case(t,components),this.currentCase=e):e=new Case(t,null),offlineMode||($(e).on("load",(i=this,function(){return i.enqueueNextCase()})),$(e).on("study-load",function(t){return function(){return t.enqueueNextStudy()}}(this)),$(e).on("preload-stack-video",function(t){return function(e,i){return t.stackView.preloadStackVideo(i)}}(this))),e},t.prototype.enqueueNextCase=function(){var t,e,i;if(this.numberofCasesLoaded++,this.stackLoader.remove(this.loadingCase),-1!==(t=this.cases.indexOf(this.loadingCase))&&++t<this.cases.length&&this.numberofCasesLoaded<window.caseLoadLimit)return e=this.cases[t],i=this,e.loadStudies(null,function(){if(e.refreshCurrentStudy("introduction"),e.currentStudy)return i.loadingCase=e,e.currentStudy.fetchStacks(null,function(){return i.stackLoader.enqueue(e),i.stackLoader.resume()})})},t.prototype.enqueueNextStudy=function(){return this.stackLoader.resume()},t.prototype.setupImages=function(){var t,e;if($(this).trigger("unbind-stacks"),this.stackView=new StackView("#largeImage"),this.stackLoader=new CaseLoader(Image),t=$("#navTab"),this.tabController=new TabViewController(t),this.thumbnails=new ThumbnailsView(t.find(".thumbnails")),t.bind("thumb-click",(e=this,function(t,i){return e.thumbClicked(t,i)})),this.quiz=new QuizView(t.find(".questions")),null!=this.currentCase)return this.currentCase.loadStudies(studies,function(t){return function(){var e;return t.currentCase.refreshCurrentStudy(currentComponentID),t.loadingCase=t.currentCase,t.currentCase.currentStudy?(e=null,"undefined"!=typeof stackedImages&&null!==stackedImages&&(e=stackedImages),offlineMode&&null==e?void 0:t.currentCase.currentStudy.fetchStacks(e,function(){return t.startStackLoading()})):t.stackLoader.pause()}}(this))},t.prototype.startStackLoading=function(){var t,e,i,s,n,o;for(this.stackLoader.enqueue(this.currentCase),this.currentCase.currentStudy.hasStacks()&&this.stackView.setStack(this.currentCase.currentStudy.firstStack()),this.stackLoader.resume(),n=[],e=t=0,i=(s=this.currentCase.currentStudy.stacks).length;t<i;e=++t)(o=s[e]).isLoaded()?n.push(void 0):n.push(this._setStackLoading(o,e));return n},t.prototype.hashchange=function(){var t;if(t=location.hash.slice(1).trim(),null!=this.tabController&&this.tabController.showTabWithName(t),null!=this.footer)return this.footer.update()},t.prototype.thumbClicked=function(t,e){var i;if(i=this.currentCase.currentStudy.stackAtIndex(e),this.stackView.setStack(i),!i.isLoaded())return this.currentCase.currentStudy.prioritise(i),this._setStackLoading(i)},t.prototype._setStackLoading=function(t,e){var i,s;return t.size()>1&&this.thumbnails.setLoading(e,!0),s=this,(i=function(i){var n,o;return n="Loading - "+(o=s.currentCase.currentStudy.totalRemainingToLoad())+" image"+(1===o?"":"s")+" remaining",0!==o?Radiopaedia.loader.show(n):Radiopaedia.loader.hide(),s.thumbnails.updateProgress(e,1-i/t.size())})(t.numberOfImagesRemainingToLoad()),$(this).on("unbind-stacks",function(){return $(t).off("load-image")}),$(t).on("load-image",function(e){return function(s,n){return e.stackView.currentImage()===n&&e.stackView.setStack(t),i(t.numberOfImagesRemainingToLoad())}}(this)),$(t).one("stack:load:full",function(t){return function(){if(null!=e)return t.thumbnails.setLoading(e,!1)}}(this))},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).FullscreenController=t}.call(this),function(){var t;t=function(){function t(t){var e;this.el=$(t),e=this,this.el.find(".hand").click(function(t){var i;return t.preventDefault(),i=$(this).next("form"),e.submitForm(i)}).qtip({content:{attr:"title"},position:{my:"top right",at:"bottom center"},style:{classes:"ui-tooltip-youtube"}})}return t.prototype.upHand=function(){return this.el.find(".hand.up")},t.prototype.downHand=function(){return this.el.find(".hand.down")},t.prototype.submitForm=function(t){var e;return e=this,t.ajaxSubmit({dataType:"json",beforeSend:function(){return Radiopaedia.loader.show("Submitting vote...")},success:function(t){switch(Radiopaedia.loader.hide(),e.el.find(".active").removeClass("active"),t.vote){case"down":return e.downHand().addClass("active");case"up":return e.upHand().addClass("active")}},error:function(){return Radiopaedia.loader.hide(),alert("Error: Unable to submit vote.")}})},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).RatingWidget=t}.call(this),function(){var t,e=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t=function(){function t(t){this.el=$(t),this.tabs=this.el.find(".tabs li"),this.tabs.click(function(t){if($(this).hasClass("inactive"))return t.preventDefault()}),this.addTooltips(),this.showTab(this.tabs.filter(".active"))}return t.prototype.showTabWithName=function(t){var e;return""===(null!=t?t:"").trim()&&(t="images"),e=this.tabs.find("."+t).parents("li"),this.showTab(e)},t.prototype.showTab=function(t){var i,s;if(!(t.length<1||t.hasClass("inactive")))switch(s=t.children("a")[0].className.trim().split(" "),this.tabs.removeClass("active"),t.addClass("active"),(i=this.el.find(".container")).children("div").hide(),!1){case e.call(s,"images")<0:return $(window).trigger("resize"),i.children(".frame, .thumbnails").not(".findings").show();case e.call(s,"questions")<0:return i.children(".questions").show();case e.call(s,"findings")<0:return i.children(".findings").show()}},t.prototype.addTooltips=function(){return this.tabs.filter(".inactive").find("a").qtip({position:{my:"bottom center",at:"top center"},style:{classes:"ui-tooltip-youtube"}})},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).TabViewController=t}.call(this),function(){var t;t=function(){function t(t){var e,i,s;this.el=$(t),s=this,this.questions=this.el.find(".question"),e=this.questions.find(".showAnswer a"),i=this.questions.find(".head a"),e.click(function(t){return t.preventDefault(),s.revealAnswer(e.index(this))}),i.click(function(t){return t.preventDefault(),s.openQuestion(i.index(this))})}return t.prototype.revealAnswer=function(t){var e;if(0<=t&&t<this.questions.length)return(e=this.questions.eq(t)).find(".showAnswer").hide(),e.find(".a").slideDown(),this.openQuestion(t+1)},t.prototype.openQuestion=function(t){var e;if(0<=t&&t<this.questions.length)return(e=this.questions.eq(t)).find(".head").removeClass("collapsed").addClass("expanded"),e.find(".body").slideDown()},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).QuizView=t}.call(this),function(){var t;t=function(){function t(t,e,i){this.el=$(t),this.nextCaseBtn=$(e),this.prevCaseBtn=$(i),this.continueBtn=this.el.find(".continue.btn"),this.backBtn=this.el.find(".goback.btn"),this.skipBtn=this.el.find(".skip.btn"),this.numberBtns=this.el.find("li"),this.bind(),this.update()}return t.prototype.bind=function(){var t;return this.continueBtn.click((t=this,function(e){return t["continue"](e)})),this.skipBtn.click(function(t){return function(){return t.gotoNextCase()}}(this)),this.backBtn.click(function(t){return function(){return t.gotoPreviousCase()}}(this)),this.bindTooltips()},t.prototype.update=function(){var t,e,i,s,n,o,r,a,l,h;if(a=function(t){return null!=t&&"/"!==t.charAt(0)?"/"+t:t},o=function(t){return a(t.pathname+t.search)},r=function(t){return a(t.pathname)},h=this,null!=(n=(t=function(t){var e;return e=null,h.numberBtns.find("a").each(function(i,s){return t(s)!==t(location)||(e=$(s).parents("li"),!1)}),e})(function(t){return a(t.pathname+t.hash+t.search)})||t(o)||t(r))&&(this.numberBtns.removeClass("active back play"),n.addClass("active"),n.prev("li").addClass("back play"),l=void 0===(i=n.find("a").data("hideCaseNumber"))||!1===i,this.el.find(".caseNumber").toggle(l),this.backBtn.toggle(l),e=this.prevCaseBtn.data("hideAlways"),this.backBtn.is(":visible")&&(this.updateBackButton(),this.backBtn.toggle(void 0===e||!1===e)),s=this.nextCaseBtn.data("hideSkip"),this.updateSkipButton(void 0===s||!1===s),n.get(0)===this.numberBtns.get(-1)?(this.updateSkipButton(!1),this.updateDiscussionFinishButton(),this.updateContinueButton($("#header #nextBtn").html(),$("#header #nextBtn").attr("class"))):this.updateContinueButton("Continue &nbsp;&nbsp;&nbsp; &gt;","normal play"),!this.continueBtn.is(":hidden")))return this.skipBtn.removeClass("orange btn-primary"),this.skipBtn.addClass("blue btn-info")},t.prototype.activePage=function(){return this.numberBtns.filter(".active").first()},t.prototype.activePageNumber=function(){var t;return""===(t=this.activePage().find("a").text().trim())&&(t="1"),parseInt(t,10)},t.prototype.pageCount=function(){return this.numberBtns.length},t.prototype.isOnLastPage=function(){return this.activePageNumber()===this.pageCount()},t.prototype["continue"]=function(t){return t.preventDefault(),this.isOnLastPage()?this.gotoNextCase():this.gotoPage(this.activePageNumber()+1)},t.prototype.goback=function(t){return t.preventDefault(),this.gotoPage(this.activePageNumber()-1)},t.prototype.gotoPage=function(t){var e,i;if(1<=t&&t<=this.pageCount()&&(i=this.numberBtns.eq(t-1).find("a"),e=jQuery.Event("click"),i.trigger(e),!e.isDefaultPrevented()))return location.href=i.attr("href")},t.prototype.gotoNextCase=function(){return"Finish"!==this.nextCaseBtn.html()&&Radiopaedia.loader.show("Loading next slide..."),location.href=this.nextCaseBtn.attr("href")},t.prototype.gotoPreviousCase=function(){return/Start of playlist/.test(this.prevCaseBtn.html())?Radiopaedia.loader.show("Loading"):Radiopaedia.loader.show("Loading previous slide..."),location.href=this.prevCaseBtn.attr("href")},t.prototype.bindTooltips=function(){return this.setupQtip(this.el.find("ul a"),{attr:"alt"})},t.prototype.updateContinueButton=function(t,e){return this.continueBtn.html(t),this.continueBtn.removeClass("big normal play btn-info"),this.continueBtn.addClass("continue btn orange btn-primary btn-dark btn-ghost "+e)},t.prototype.updateBackButton=function(){return this.backBtn.html($("#header #prevBtn").html()),this.backBtn.removeClass("big normal"),this.backBtn.addClass($("#header #prevBtn").attr("class"))},t.prototype.updateSkipButton=function(t){return this.skipBtn.html($("#header #nextBtn").html()),this.skipBtn.removeClass("big normal"),this.skipBtn.addClass($("#header #nextBtn").attr("class")),this.skipBtn.toggle(t)},t.prototype.updateDiscussionFinishButton=function(){var t;if(t=$(".actionBar .btn.finish"))return t.html($("#header #nextBtn").html()),t.addClass($("#header #nextBtn").attr("class"))},t.prototype.setupQtip=function(t,e){return t.qtip({content:e,position:{my:"bottom center",at:"top center"},style:{classes:"ui-tooltip-youtube"}})},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).FooterNav=t}.call(this),function(){var t;t=function(){function t(t,e,i){this.el=$(t),0!==this.el.length&&($("body").data("mobile",!0),this.nextLink=$(e),this.prevLink=$(i),this.prevComponentButton=this.find("#component-nav a.prev"),this.nextComponentButton=this.find("#component-nav a.next"),this.prevCaseButton=this.find("#case-nav a.prev"),this.nextCaseButton=this.find("#case-nav a.next"),this.componentSelect=this.find("#dropdown-nav select"),this.bindTouchEvents(),this.update())}return t.prototype.find=function(t){return this.el.find(t)},t.prototype.bindTouchEvents=function(){var t;return this.prevComponentButton.on("click touch",(t=this,function(){return t.previousComponent()})),this.nextComponentButton.on("click touch",function(t){return function(){return t.nextComponent()}}(this)),this.prevCaseButton.on("click touch",function(t){return function(){return t.previousCase()}}(this)),this.nextCaseButton.on("click touch",function(t){return function(){return t.nextCase()}}(this)),this.componentSelect.on("change",function(t){return function(){return t.goToCurrentComponent()}}(this))},t.prototype.update=function(){var t,e,i,s,n,o,r,a,l,h,c,u;return c=function(t){return null!=t&&"/"!==t.charAt(0)?"/"+t:t},l=function(t){return c(t.pathname+t.search)},h=function(t){return c(t.pathname)},u=this,i=function(t){var e;return(e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/))&&e[5]},a=(e=function(t){var e;return e=null,u.componentSelect.find("option").each(function(){var i;return(i=document.createElement("a")).href=this.value,t(i)!==t(location)||(e=$(this),!1)}),e})(function(t){return c(t.pathname+t.hash+t.search)})||e(l)||e(h),this.prevLink.data().hideAlways&&this.nextLink.data().hideSkip?(this.find("#case-nav").hide(),this.find("#dropdown-nav").addClass("fullWidth")):(this.find("#case-nav").show(),this.find("#dropdown-nav").removeClass("fullWidth")),null!=a&&(a[0].selected=!0),r=this.isOnFirstPage(),n=this.isOnLastPage(),t=i(location.href),o=this.prevLink[0].href.length<=1||i(this.prevLink[0].href)===t,s=this.nextLink[0].href.length<=1||i(this.nextLink[0].href)===t,this.prevComponentButton.toggleClass("disabled",r),this.nextComponentButton.toggleClass("disabled",n),this.prevCaseButton.toggleClass("disabled",o),this.nextCaseButton.toggleClass("disabled",s)},t.prototype.activePageIndex=function(){return this.componentSelect[0].selectedIndex},t.prototype.pageCount=function(){return this.componentSelect.find("option").length},t.prototype.isOnLastPage=function(){return this.activePageIndex()===this.pageCount()-1},t.prototype.isOnFirstPage=function(){return 0===this.activePageIndex()},t.prototype.previousCase=function(){return location.href=this.prevLink.attr("href")},t.prototype.nextCase=function(){return location.href=this.nextLink.attr("href")},t.prototype.previousComponent=function(){if(!this.isOnFirstPage())return this.componentSelect[0].options[this.activePageIndex()-1].selected=!0,this.goToCurrentComponent()},t.prototype.nextComponent=function(){if(!this.isOnLastPage())return this.componentSelect[0].options[this.activePageIndex()+1].selected=!0,this.goToCurrentComponent()},t.prototype.goToCurrentComponent=function(){return offlineMode?window.location=this.componentSelect.val():$.pjax({url:this.componentSelect.val(),container:"#content"})},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).MobileFooterNav=t}.call(this),function(){var t;t=function(){function t(t){this.el=$(t),this.span=this.el.find("span"),this.span.hide(),this.el.show(),this.visible=!1}return t.prototype.show=function(t){return null==t&&(t="Loading..."),this.span.text(t),this.visible||this.span.slideDown("fast"),this.visible=!0},t.prototype.hide=function(){return this.visible&&this.span.slideUp("fast"),this.visible=!1},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).Loader=t}.call(this),function(){$(function(){return $("#download_as_zip").click(function(t){return t.preventDefault(),this.playlistId=$(this).data().playlistId,$.ajax({type:"POST",dataType:"JSON",url:"/presentation_downloads/playlists/"+this.playlistId+".json",success:function(t){return $.success_message(t.message)},error:function(){return $.error_message("There was a problem zipping this playlist.")}})})})}.call(this),$(document).keyup(function(t){switch(t.which){case 37:var e=$("#offline-workflow-page-links .active").prev().find("a:visible").attr("href");(e=e||$("#prevEndBtn").attr("href"))&&(window.location=new URL(e,window.location));break;case 39:var i=$(".btn.orange").last();i&&i.is(":visible")&&i[0].click();break;default:return}t.preventDefault()}),function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};window.iframeReady=function(){return $("#iframe-loading").hide(),$("#iframe-content").show(),Radiopaedia.loader.hide()},$(function(){var e;return e=function(t){var e;if(e=$('meta[name="csrf-token"]').attr("content"))return t.setRequestHeader("X-CSRF-Token",e)},t.call($,"ajaxPrefilter")>=0?$.ajaxPrefilter(function(t,i,s){return e(s)}):$(document).ajaxSend(function(t,i){return e(i)}),$(document).keyup(function(t){if(27===t.which)return window.close()}),new UrlRedirector(".iframeable a",function(t){return $(window).width()<1024?window.open(t,"_blank"):(/\?/.test(t)?t+="&iframe=true":t+="?iframe=true",$("#iframe").attr("src",t),$("#main-content").hide(),$("#iframe-loading").show(),Radiopaedia.loader.show())}),$(document).on("click","#content a#iframe-close-btn",function(t){return $("#iframe-content").hide(),$("#main-content").show(),t.preventDefault()}),Radiopaedia.loader=new Loader("#loader"),new FullscreenController})}.call(this);